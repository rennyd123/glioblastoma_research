<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>GBM Analysis - Cleaning</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">GBM Analysis</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../data_summary.html"> 
<span class="menu-text">Data Summary</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../eda.html"> 
<span class="menu-text">EDA</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../initial_pres.html"> 
<span class="menu-text">Initial Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../main_questions.html"> 
<span class="menu-text">Main Questions</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../ki67_mitotic.html"> 
<span class="menu-text">Ki67 &amp; Mitotic</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../untreated.html"> 
<span class="menu-text">Untreated</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#cleaning" id="toc-cleaning" class="nav-link active" data-scroll-target="#cleaning">Cleaning</a>
  <ul class="collapse">
  <li><a href="#patient-id" id="toc-patient-id" class="nav-link" data-scroll-target="#patient-id">Patient ID</a></li>
  <li><a href="#gender" id="toc-gender" class="nav-link" data-scroll-target="#gender">Gender</a></li>
  <li><a href="#race" id="toc-race" class="nav-link" data-scroll-target="#race">Race</a></li>
  <li><a href="#diagnosis-age" id="toc-diagnosis-age" class="nav-link" data-scroll-target="#diagnosis-age">Diagnosis Age</a></li>
  <li><a href="#exclude" id="toc-exclude" class="nav-link" data-scroll-target="#exclude">Exclude</a></li>
  <li><a href="#vital-status" id="toc-vital-status" class="nav-link" data-scroll-target="#vital-status">Vital Status</a></li>
  <li><a href="#institution-type" id="toc-institution-type" class="nav-link" data-scroll-target="#institution-type">Institution Type</a></li>
  <li><a href="#overall-survival" id="toc-overall-survival" class="nav-link" data-scroll-target="#overall-survival">Overall Survival</a></li>
  <li><a href="#resection-extent" id="toc-resection-extent" class="nav-link" data-scroll-target="#resection-extent">Resection Extent</a></li>
  <li><a href="#surgery-date" id="toc-surgery-date" class="nav-link" data-scroll-target="#surgery-date">Surgery Date</a></li>
  <li><a href="#number-of-surgeries" id="toc-number-of-surgeries" class="nav-link" data-scroll-target="#number-of-surgeries">Number of Surgeries</a></li>
  <li><a href="#number-of-radiation-cycles" id="toc-number-of-radiation-cycles" class="nav-link" data-scroll-target="#number-of-radiation-cycles">Number of Radiation Cycles</a></li>
  <li><a href="#number-of-chemotherapy-cycles" id="toc-number-of-chemotherapy-cycles" class="nav-link" data-scroll-target="#number-of-chemotherapy-cycles">Number of Chemotherapy Cycles</a></li>
  <li><a href="#discontinued-treatment" id="toc-discontinued-treatment" class="nav-link" data-scroll-target="#discontinued-treatment">Discontinued Treatment?</a></li>
  <li><a href="#time-from-surgery-to-radiation" id="toc-time-from-surgery-to-radiation" class="nav-link" data-scroll-target="#time-from-surgery-to-radiation">Time from Surgery to Radiation</a></li>
  <li><a href="#received-stupp-protocol" id="toc-received-stupp-protocol" class="nav-link" data-scroll-target="#received-stupp-protocol">Received Stupp Protocol?</a></li>
  <li><a href="#discontinued-stupps" id="toc-discontinued-stupps" class="nav-link" data-scroll-target="#discontinued-stupps">Discontinued Stupps?</a></li>
  <li><a href="#time-from-symptoms-to-diagnosis" id="toc-time-from-symptoms-to-diagnosis" class="nav-link" data-scroll-target="#time-from-symptoms-to-diagnosis">Time From Symptoms to Diagnosis</a></li>
  <li><a href="#time-from-symptoms-to-death" id="toc-time-from-symptoms-to-death" class="nav-link" data-scroll-target="#time-from-symptoms-to-death">Time From Symptoms to Death</a></li>
  <li><a href="#death-date" id="toc-death-date" class="nav-link" data-scroll-target="#death-date">Death Date</a></li>
  <li><a href="#on-treatment-last-visit" id="toc-on-treatment-last-visit" class="nav-link" data-scroll-target="#on-treatment-last-visit">On Treatment Last Visit?</a></li>
  <li><a href="#number-of-lobes-involved" id="toc-number-of-lobes-involved" class="nav-link" data-scroll-target="#number-of-lobes-involved">Number of Lobes Involved</a></li>
  <li><a href="#lobes-involved" id="toc-lobes-involved" class="nav-link" data-scroll-target="#lobes-involved">Lobes Involved</a></li>
  <li><a href="#other-brain-regions" id="toc-other-brain-regions" class="nav-link" data-scroll-target="#other-brain-regions">Other Brain Regions</a></li>
  <li><a href="#unqiue-clinical-findings" id="toc-unqiue-clinical-findings" class="nav-link" data-scroll-target="#unqiue-clinical-findings">Unqiue Clinical Findings</a></li>
  <li><a href="#seizures-at-presentation" id="toc-seizures-at-presentation" class="nav-link" data-scroll-target="#seizures-at-presentation">Seizures at Presentation</a></li>
  <li><a href="#seizures-later" id="toc-seizures-later" class="nav-link" data-scroll-target="#seizures-later">Seizures Later</a></li>
  <li><a href="#dvt-or-pe-during-presentation" id="toc-dvt-or-pe-during-presentation" class="nav-link" data-scroll-target="#dvt-or-pe-during-presentation">DVT or PE During Presentation</a></li>
  <li><a href="#dvt-or-pe-during-course" id="toc-dvt-or-pe-during-course" class="nav-link" data-scroll-target="#dvt-or-pe-during-course">DVT or PE During Course</a></li>
  <li><a href="#microvascular-proliferation" id="toc-microvascular-proliferation" class="nav-link" data-scroll-target="#microvascular-proliferation">Microvascular Proliferation</a></li>
  <li><a href="#early-microvascular-proliferation" id="toc-early-microvascular-proliferation" class="nav-link" data-scroll-target="#early-microvascular-proliferation">Early Microvascular Proliferation</a></li>
  <li><a href="#focal-microvascular-proliferation" id="toc-focal-microvascular-proliferation" class="nav-link" data-scroll-target="#focal-microvascular-proliferation">Focal Microvascular Proliferation</a></li>
  <li><a href="#necrosis" id="toc-necrosis" class="nav-link" data-scroll-target="#necrosis">Necrosis?</a></li>
  <li><a href="#chromosomal" id="toc-chromosomal" class="nav-link" data-scroll-target="#chromosomal">+7/-10 Chromosomal</a></li>
  <li><a href="#egfr-amplification" id="toc-egfr-amplification" class="nav-link" data-scroll-target="#egfr-amplification">EGFR Amplification</a></li>
  <li><a href="#tert-promoter" id="toc-tert-promoter" class="nav-link" data-scroll-target="#tert-promoter">TERT Promoter?</a></li>
  <li><a href="#ptert-variant" id="toc-ptert-variant" class="nav-link" data-scroll-target="#ptert-variant">pTERT Variant</a></li>
  <li><a href="#mgmt-methylation" id="toc-mgmt-methylation" class="nav-link" data-scroll-target="#mgmt-methylation">MGMT Methylation</a></li>
  <li><a href="#ki67_li" id="toc-ki67_li" class="nav-link" data-scroll-target="#ki67_li">Ki67_Li</a></li>
  <li><a href="#ki67-specific" id="toc-ki67-specific" class="nav-link" data-scroll-target="#ki67-specific">Ki67 Specific</a></li>
  <li><a href="#atrx" id="toc-atrx" class="nav-link" data-scroll-target="#atrx">ATRX</a></li>
  <li><a href="#other-mutations" id="toc-other-mutations" class="nav-link" data-scroll-target="#other-mutations">Other Mutations</a></li>
  <li><a href="#mitotic-activity-increase" id="toc-mitotic-activity-increase" class="nav-link" data-scroll-target="#mitotic-activity-increase">Mitotic Activity Increase</a></li>
  <li><a href="#specific-mitotic-activity" id="toc-specific-mitotic-activity" class="nav-link" data-scroll-target="#specific-mitotic-activity">Specific Mitotic Activity</a></li>
  <li><a href="#caris" id="toc-caris" class="nav-link" data-scroll-target="#caris">Caris</a></li>
  <li><a href="#dna-profiling" id="toc-dna-profiling" class="nav-link" data-scroll-target="#dna-profiling">DNA Profiling?</a></li>
  <li><a href="#methylation-result" id="toc-methylation-result" class="nav-link" data-scroll-target="#methylation-result">Methylation Result</a></li>
  <li><a href="#creating-status-variable" id="toc-creating-status-variable" class="nav-link" data-scroll-target="#creating-status-variable">Creating Status Variable</a></li>
  </ul></li>
  <li><a href="#exporting" id="toc-exporting" class="nav-link" data-scroll-target="#exporting">Exporting</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Cleaning</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div id="cell-0" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"../../data/raw_data/combined_raw.csv"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.drop(columns <span class="op">=</span> <span class="st">"Unnamed: 0"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>df.columns <span class="op">=</span> df.columns.<span class="bu">str</span>.strip()</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">patient_id</th>
<th data-quarto-table-cell-role="th">gender</th>
<th data-quarto-table-cell-role="th">race</th>
<th data-quarto-table-cell-role="th">diagnosis_age</th>
<th data-quarto-table-cell-role="th">exclude</th>
<th data-quarto-table-cell-role="th">vital_status</th>
<th data-quarto-table-cell-role="th">institution_type</th>
<th data-quarto-table-cell-role="th">overall_survival</th>
<th data-quarto-table-cell-role="th">resection_extent</th>
<th data-quarto-table-cell-role="th">surgery_date</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">MGMT_methylation</th>
<th data-quarto-table-cell-role="th">Ki67_LI</th>
<th data-quarto-table-cell-role="th">Ki67_specific</th>
<th data-quarto-table-cell-role="th">ATRX</th>
<th data-quarto-table-cell-role="th">other_mutations</th>
<th data-quarto-table-cell-role="th">mitotic_activity_increase</th>
<th data-quarto-table-cell-role="th">specific_mitotic</th>
<th data-quarto-table-cell-role="th">caris</th>
<th data-quarto-table-cell-role="th">dna_profile</th>
<th data-quarto-table-cell-role="th">methylation_result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1.0</td>
<td>Male</td>
<td>other</td>
<td>79.0</td>
<td>NaN</td>
<td>lost to follow up</td>
<td>ER</td>
<td>NaN</td>
<td>Resection NOS</td>
<td>12/2/2024</td>
<td>...</td>
<td>UM</td>
<td>&gt; 15%</td>
<td>25%</td>
<td>ND</td>
<td>NaN</td>
<td>scattered</td>
<td>NaN</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>10.0</td>
<td>Male</td>
<td>black</td>
<td>65.0</td>
<td>NaN</td>
<td>alive</td>
<td>ER</td>
<td>NaN</td>
<td>Resection NOS</td>
<td>4/23/2024</td>
<td>...</td>
<td>UM</td>
<td>&gt; 15%</td>
<td>15-20%</td>
<td>RE</td>
<td>TP53, PTEN</td>
<td>easily identified</td>
<td>NaN</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>100.0</td>
<td>Female</td>
<td>white</td>
<td>77.0</td>
<td>NaN</td>
<td>dead</td>
<td>Outpatient clinic</td>
<td>11.00</td>
<td>Gross total resection</td>
<td>12/4/2023</td>
<td>...</td>
<td>UM</td>
<td>&gt; 15%</td>
<td>50%</td>
<td>RE</td>
<td>NaN</td>
<td>frequent</td>
<td>NaN</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>101.0</td>
<td>Female</td>
<td>black</td>
<td>59.0</td>
<td>NaN</td>
<td>dead</td>
<td>Outpatient clinic</td>
<td>4.75</td>
<td>Biopsy</td>
<td>11/30/2023</td>
<td>...</td>
<td>UM</td>
<td>&gt; 15%</td>
<td>25%</td>
<td>RE</td>
<td>NaN</td>
<td>1to5</td>
<td>2to3</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>102.0</td>
<td>Female</td>
<td>black</td>
<td>61.0</td>
<td>NaN</td>
<td>lost to follow up</td>
<td>ER</td>
<td>NaN</td>
<td>Resection NOS</td>
<td>7/29/2023, 11/15/2023, 4/28/2024</td>
<td>...</td>
<td>UM</td>
<td>NaN</td>
<td>NaN</td>
<td>RE</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>5 rows × 47 columns</p>
</div>
</div>
</div>
<div id="cell-1" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>Index(['patient_id', 'gender', 'race', 'diagnosis_age', 'exclude',
       'vital_status', 'institution_type', 'overall_survival',
       'resection_extent', 'surgery_date', 'num_surgeries', 'num_radiations',
       'num_chemo', 'discontinued_treatment', 'time_surgery_radiation',
       'received_stupp', 'discontinued_stupps', 'time_symptoms_diagnosis',
       'time_symptoms_death', 'date_of_death', 'on_treatment_last_visit',
       'num_lobes', 'lobes_involved', 'other_brain_regions',
       'unique_clinical_findings', 'seizures_presentation', 'seizures_later',
       'dvt_pe_presentation', 'dvt_pe_during', 'microvascular_proliferation',
       'mp_early', 'mp_focal', 'necrosis', '+7_-10_chromosomal',
       'EGFR_amplification', 'TERT_promoter', 'pTERT_variant',
       'MGMT_methylation', 'Ki67_LI', 'Ki67_specific', 'ATRX',
       'other_mutations', 'mitotic_activity_increase', 'specific_mitotic',
       'caris', 'dna_profile', 'methylation_result'],
      dtype='object')</code></pre>
</div>
</div>
<section id="cleaning" class="level2">
<h2 class="anchored" data-anchor-id="cleaning">Cleaning</h2>
<p>The goal is to go column by column and clean each one to ensure consistent values.</p>
<section id="patient-id" class="level3">
<h3 class="anchored" data-anchor-id="patient-id">Patient ID</h3>
<p>Combining these since they are all pretty much the same.</p>
<div id="cell-4" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ensuring there are no duplicate patient IDs</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'patient_id'</span>].duplicated().<span class="bu">any</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>True</code></pre>
</div>
</div>
</section>
<section id="gender" class="level3">
<h3 class="anchored" data-anchor-id="gender">Gender</h3>
<div id="cell-6" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking what the gender values are and seeing if there are any invalid ones</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"gender"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>array(['Male', 'Female', nan], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="race" class="level3">
<h3 class="anchored" data-anchor-id="race">Race</h3>
<div id="cell-8" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># same with race </span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"race"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>array(['other', 'black', 'white ', 'asian', nan, 'unknown', 'black ',
       'white', 'unknown ', 'whit'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-9" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mapping values to make them consistent</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>white <span class="op">=</span> [<span class="st">"white"</span>, <span class="st">"white "</span>, <span class="st">"whit"</span>]</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>black <span class="op">=</span> [<span class="st">"black"</span>, <span class="st">"black "</span>]</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>unknown <span class="op">=</span> [<span class="st">"unknown "</span>, <span class="st">"unknown"</span>, np.nan]</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>mapping_race <span class="op">=</span> {k: <span class="st">"white"</span> <span class="cf">for</span> k <span class="kw">in</span> white}</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>mapping_race.update({k: <span class="st">"black"</span> <span class="cf">for</span> k <span class="kw">in</span> black})</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>mapping_race.update({k: <span class="st">"unknown"</span> <span class="cf">for</span> k <span class="kw">in</span> unknown})</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"race"</span>] <span class="op">=</span> df[<span class="st">"race"</span>].replace(mapping_race)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"race"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>array(['other', 'black', 'white', 'asian', 'unknown'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="diagnosis-age" class="level3">
<h3 class="anchored" data-anchor-id="diagnosis-age">Diagnosis Age</h3>
<div id="cell-11" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"diagnosis_age"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>array([79., 65., 77., 59., 61., 75., 60., 67., nan, 43., 69., 31., 58.,
       64., 70., 71., 72., 73., 78., 63., 55., 74., 82., 39., 57., 52.,
       54., 62., 40., 48., 66., 76., 49., 46., 53., 84., 83., 87., 80.,
       56., 45., 51., 33., 36., 38., 68., 85., 81., 91., 47., 88.])</code></pre>
</div>
</div>
<div id="cell-12" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># keeping the NaN values for now since these are all to be excluded in the initial analysis</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>df[df[<span class="st">"diagnosis_age"</span>].isna()]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">patient_id</th>
<th data-quarto-table-cell-role="th">gender</th>
<th data-quarto-table-cell-role="th">race</th>
<th data-quarto-table-cell-role="th">diagnosis_age</th>
<th data-quarto-table-cell-role="th">exclude</th>
<th data-quarto-table-cell-role="th">vital_status</th>
<th data-quarto-table-cell-role="th">institution_type</th>
<th data-quarto-table-cell-role="th">overall_survival</th>
<th data-quarto-table-cell-role="th">resection_extent</th>
<th data-quarto-table-cell-role="th">surgery_date</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">MGMT_methylation</th>
<th data-quarto-table-cell-role="th">Ki67_LI</th>
<th data-quarto-table-cell-role="th">Ki67_specific</th>
<th data-quarto-table-cell-role="th">ATRX</th>
<th data-quarto-table-cell-role="th">other_mutations</th>
<th data-quarto-table-cell-role="th">mitotic_activity_increase</th>
<th data-quarto-table-cell-role="th">specific_mitotic</th>
<th data-quarto-table-cell-role="th">caris</th>
<th data-quarto-table-cell-role="th">dna_profile</th>
<th data-quarto-table-cell-role="th">methylation_result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">9</td>
<td>107.0</td>
<td>NaN</td>
<td>unknown</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>UM</td>
<td>&gt; 15%</td>
<td>20-25%</td>
<td>L</td>
<td>BRCA2, ATRX, PT53, PDGFRA, PTEN, SETD2, MLH1, ...</td>
<td>6to10</td>
<td>7</td>
<td>Yes</td>
<td>Yes</td>
<td>subtype E</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">36</td>
<td>131.0</td>
<td>NaN</td>
<td>unknown</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>M</td>
<td>&gt; 15%</td>
<td>40%</td>
<td>RE</td>
<td>NaN</td>
<td>easily identified</td>
<td>NaN</td>
<td>No</td>
<td>no</td>
<td>n/A</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">65</td>
<td>158.0</td>
<td>NaN</td>
<td>unknown</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>UM</td>
<td>&gt; 15%</td>
<td>15-20%</td>
<td>RE</td>
<td>NaN</td>
<td>scattered</td>
<td>NaN</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">67</td>
<td>16.0</td>
<td>NaN</td>
<td>unknown</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>UM</td>
<td>&gt; 15%</td>
<td>25%</td>
<td>RE</td>
<td>NaN</td>
<td>&gt;10</td>
<td>at least 10</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">84</td>
<td>175.0</td>
<td>NaN</td>
<td>unknown</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>UM</td>
<td>&gt; 15%</td>
<td>30%</td>
<td>RE</td>
<td>NaN</td>
<td>increased</td>
<td>NaN</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">223</td>
<td>38.0</td>
<td>NaN</td>
<td>unknown</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>UM</td>
<td>&gt; 15%</td>
<td>25-30%</td>
<td>RE</td>
<td>NaN</td>
<td>frequent</td>
<td>NaN</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">228</td>
<td>42.0</td>
<td>NaN</td>
<td>unknown</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>M</td>
<td>&gt; 15%</td>
<td>40%</td>
<td>RE</td>
<td>NaN</td>
<td>6to10</td>
<td>6</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">257</td>
<td>69.0</td>
<td>NaN</td>
<td>unknown</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>UM</td>
<td>&gt; 15%</td>
<td>20-25%</td>
<td>RE</td>
<td>NaN</td>
<td>6to10</td>
<td>7</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">270</td>
<td>80.0</td>
<td>NaN</td>
<td>unknown</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>UM</td>
<td>&gt; 15%</td>
<td>40%</td>
<td>RE</td>
<td>NaN</td>
<td>1to5</td>
<td>5</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">281</td>
<td>90.0</td>
<td>NaN</td>
<td>unknown</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>UM</td>
<td>15%</td>
<td>15%</td>
<td>RE</td>
<td>NaN</td>
<td>scattered</td>
<td>NaN</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">291</td>
<td>NaN</td>
<td>NaN</td>
<td>unknown</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">292</td>
<td>NaN</td>
<td>NaN</td>
<td>unknown</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">293</td>
<td>NaN</td>
<td>NaN</td>
<td>unknown</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>13 rows × 47 columns</p>
</div>
</div>
</div>
<div id="cell-13" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"diagnosis_age"</span>] <span class="op">=</span> df[<span class="st">"diagnosis_age"</span>].astype(<span class="bu">float</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-14" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"diagnosis_age"</span>].dtype</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>dtype('float64')</code></pre>
</div>
</div>
</section>
<section id="exclude" class="level3">
<h3 class="anchored" data-anchor-id="exclude">Exclude</h3>
<div id="cell-16" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"exclude"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>array([nan])</code></pre>
</div>
</div>
<div id="cell-17" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"exclude"</span>] <span class="op">=</span> df[<span class="st">"exclude"</span>].fillna(<span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-18" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"exclude"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>array([0.])</code></pre>
</div>
</div>
<div id="cell-19" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">patient_id</th>
<th data-quarto-table-cell-role="th">gender</th>
<th data-quarto-table-cell-role="th">race</th>
<th data-quarto-table-cell-role="th">diagnosis_age</th>
<th data-quarto-table-cell-role="th">exclude</th>
<th data-quarto-table-cell-role="th">vital_status</th>
<th data-quarto-table-cell-role="th">institution_type</th>
<th data-quarto-table-cell-role="th">overall_survival</th>
<th data-quarto-table-cell-role="th">resection_extent</th>
<th data-quarto-table-cell-role="th">surgery_date</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">MGMT_methylation</th>
<th data-quarto-table-cell-role="th">Ki67_LI</th>
<th data-quarto-table-cell-role="th">Ki67_specific</th>
<th data-quarto-table-cell-role="th">ATRX</th>
<th data-quarto-table-cell-role="th">other_mutations</th>
<th data-quarto-table-cell-role="th">mitotic_activity_increase</th>
<th data-quarto-table-cell-role="th">specific_mitotic</th>
<th data-quarto-table-cell-role="th">caris</th>
<th data-quarto-table-cell-role="th">dna_profile</th>
<th data-quarto-table-cell-role="th">methylation_result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1.0</td>
<td>Male</td>
<td>other</td>
<td>79.0</td>
<td>0.0</td>
<td>lost to follow up</td>
<td>ER</td>
<td>NaN</td>
<td>Resection NOS</td>
<td>12/2/2024</td>
<td>...</td>
<td>UM</td>
<td>&gt; 15%</td>
<td>25%</td>
<td>ND</td>
<td>NaN</td>
<td>scattered</td>
<td>NaN</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>10.0</td>
<td>Male</td>
<td>black</td>
<td>65.0</td>
<td>0.0</td>
<td>alive</td>
<td>ER</td>
<td>NaN</td>
<td>Resection NOS</td>
<td>4/23/2024</td>
<td>...</td>
<td>UM</td>
<td>&gt; 15%</td>
<td>15-20%</td>
<td>RE</td>
<td>TP53, PTEN</td>
<td>easily identified</td>
<td>NaN</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>100.0</td>
<td>Female</td>
<td>white</td>
<td>77.0</td>
<td>0.0</td>
<td>dead</td>
<td>Outpatient clinic</td>
<td>11.00</td>
<td>Gross total resection</td>
<td>12/4/2023</td>
<td>...</td>
<td>UM</td>
<td>&gt; 15%</td>
<td>50%</td>
<td>RE</td>
<td>NaN</td>
<td>frequent</td>
<td>NaN</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>101.0</td>
<td>Female</td>
<td>black</td>
<td>59.0</td>
<td>0.0</td>
<td>dead</td>
<td>Outpatient clinic</td>
<td>4.75</td>
<td>Biopsy</td>
<td>11/30/2023</td>
<td>...</td>
<td>UM</td>
<td>&gt; 15%</td>
<td>25%</td>
<td>RE</td>
<td>NaN</td>
<td>1to5</td>
<td>2to3</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>102.0</td>
<td>Female</td>
<td>black</td>
<td>61.0</td>
<td>0.0</td>
<td>lost to follow up</td>
<td>ER</td>
<td>NaN</td>
<td>Resection NOS</td>
<td>7/29/2023, 11/15/2023, 4/28/2024</td>
<td>...</td>
<td>UM</td>
<td>NaN</td>
<td>NaN</td>
<td>RE</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">289</td>
<td>98.0</td>
<td>Male</td>
<td>white</td>
<td>64.0</td>
<td>0.0</td>
<td>alive</td>
<td>Outpatient clinic</td>
<td>NaN</td>
<td>Gross total resection</td>
<td>12/21/2023</td>
<td>...</td>
<td>M</td>
<td>&gt; 15%</td>
<td>20-25%</td>
<td>RE</td>
<td>NaN</td>
<td>1to5</td>
<td>2to3</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">290</td>
<td>99.0</td>
<td>Female</td>
<td>other</td>
<td>59.0</td>
<td>0.0</td>
<td>dead</td>
<td>ER</td>
<td>7.00</td>
<td>Resection NOS</td>
<td>11/7/2023, 12/8/2023</td>
<td>...</td>
<td>UM</td>
<td>&gt; 15%</td>
<td>15-20%</td>
<td>RE</td>
<td>NaN</td>
<td>increased</td>
<td>NaN</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">291</td>
<td>NaN</td>
<td>NaN</td>
<td>unknown</td>
<td>NaN</td>
<td>0.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">292</td>
<td>NaN</td>
<td>NaN</td>
<td>unknown</td>
<td>NaN</td>
<td>0.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">293</td>
<td>NaN</td>
<td>NaN</td>
<td>unknown</td>
<td>NaN</td>
<td>0.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>294 rows × 47 columns</p>
</div>
</div>
</div>
</section>
<section id="vital-status" class="level3">
<h3 class="anchored" data-anchor-id="vital-status">Vital Status</h3>
<div id="cell-21" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mapping values to make them consistent</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>lost <span class="op">=</span> [<span class="st">"lost to follow up"</span>, <span class="st">"lost to follow up "</span>]</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>alive <span class="op">=</span> [<span class="st">"alive "</span>, <span class="st">"alive"</span>]</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>mapping_vital <span class="op">=</span> {k: <span class="st">"lost to follow up"</span> <span class="cf">for</span> k <span class="kw">in</span> lost}</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>mapping_vital.update({k: <span class="st">"alive"</span> <span class="cf">for</span> k <span class="kw">in</span> alive})</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"vital_status"</span>] <span class="op">=</span> df[<span class="st">"vital_status"</span>].replace(mapping_vital)</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"vital_status"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>array(['lost to follow up', 'alive', 'dead', nan], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="institution-type" class="level3">
<h3 class="anchored" data-anchor-id="institution-type">Institution Type</h3>
<div id="cell-23" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>er <span class="op">=</span> [<span class="st">"ER "</span>, <span class="st">"ER"</span>]</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>out <span class="op">=</span> [<span class="st">"outpatient clinic "</span>, <span class="st">"outpatient clinic"</span>, <span class="st">"Outpatient clinic "</span>, <span class="st">"Outpatient clinic"</span>, <span class="st">"oupatient clinic"</span>]</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>inpatient <span class="op">=</span> [<span class="st">"inpatient clinic"</span>]</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>mapping_institution <span class="op">=</span> {k: <span class="st">"ER"</span> <span class="cf">for</span> k <span class="kw">in</span> er}</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>mapping_institution.update({k: <span class="st">"outpatient clinic"</span> <span class="cf">for</span> k <span class="kw">in</span> out})</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>mapping_institution.update({k: <span class="st">"inpatient"</span> <span class="cf">for</span> k <span class="kw">in</span> inpatient})</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"institution_type"</span>] <span class="op">=</span> df[<span class="st">"institution_type"</span>].replace(mapping_institution)</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"institution_type"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>array(['ER', 'outpatient clinic', nan, 'inpatient'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="overall-survival" class="level3">
<h3 class="anchored" data-anchor-id="overall-survival">Overall Survival</h3>
<div id="cell-25" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># coverting to float</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"overall_survival"</span>] <span class="op">=</span> df[<span class="st">"overall_survival"</span>].astype(<span class="bu">float</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"overall_survival"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>array([  nan, 11.  ,  4.75,  5.25, 13.25, 19.  , 12.5 ,  5.75, 11.5 ,
       14.  , 19.75,  6.  , 10.  ,  1.5 ,  2.25, 12.  , 65.  ,  8.25,
        1.  , 13.5 ,  2.5 ,  4.  ,  2.  ,  3.5 , 21.5 ,  3.  , 10.75,
        5.5 , 24.25, 14.5 , 18.75, 21.25, 37.  , 15.25,  7.  , 24.  ,
       46.  ,  9.  , 12.25, 23.5 ,  9.25, 14.25, 17.25,  6.25,  0.5 ,
        6.75,  4.25,  7.25,  0.75,  2.75,  0.25,  9.75,  4.5 , 25.25,
        3.75,  5.  , 61.5 ,  1.25, 16.5 , 32.75, 19.5 ,  8.5 , 13.75,
       14.75, 45.5 , 23.  ,  3.25, 29.5 , 22.  , 10.5 , 16.  ,  1.75,
       26.  , 29.75, 20.25, 19.25, 17.  , 15.  , 33.  , 15.5 , 27.  ,
       28.  ,  8.75, 17.5 ,  6.5 , 16.75])</code></pre>
</div>
</div>
</section>
<section id="resection-extent" class="level3">
<h3 class="anchored" data-anchor-id="resection-extent">Resection Extent</h3>
<div id="cell-27" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"resection_extent"</span>].unique()</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>resection <span class="op">=</span> [<span class="st">"Resection NOS"</span>, <span class="st">"Resection NOS "</span>, <span class="st">"Resection NOS  "</span>, <span class="st">"Resection NOS (Debulking)"</span>, <span class="st">"resection NOS "</span>, <span class="st">"resection NOS"</span>, <span class="st">"Resection NOS x2"</span>, <span class="st">" Resection NOS"</span>, <span class="st">"Biopsy, Resection NOS"</span>]</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>gross <span class="op">=</span> [<span class="st">"gross total resection"</span>, <span class="st">"Gross total resection"</span>, <span class="st">"gross total resection "</span>, <span class="st">"gross total resection, Resection NOS"</span>, <span class="st">"gross total resection, Resection NOS x2"</span>, <span class="st">"gross total resection x2, resection NOS"</span>, <span class="st">"gross resection"</span>]</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>subtotal <span class="op">=</span> [<span class="st">"Subtotal resection "</span>, <span class="st">"Subtotal resection"</span>, <span class="st">"Subtotal Resection"</span>, <span class="st">"subtotal resection"</span>, <span class="st">"subtotal resection "</span>]</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>biopsy <span class="op">=</span> [<span class="st">"Biopsy "</span>, <span class="st">"Biopsy"</span>, <span class="st">"biopsy "</span>, <span class="st">"biopsy"</span>]</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>mapping_extent <span class="op">=</span> {k: <span class="st">"Resection NOS"</span> <span class="cf">for</span> k <span class="kw">in</span> resection}</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>mapping_extent.update({k: <span class="st">"Gross Total Resection"</span> <span class="cf">for</span> k <span class="kw">in</span> gross})</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>mapping_extent.update({k: <span class="st">"Subtotal Resection"</span> <span class="cf">for</span> k <span class="kw">in</span> subtotal})</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>mapping_extent.update({k: <span class="st">"Biopsy"</span> <span class="cf">for</span> k <span class="kw">in</span> biopsy})</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"resection_extent"</span>] <span class="op">=</span> df[<span class="st">"resection_extent"</span>].replace(mapping_extent)</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"resection_extent"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>array(['Resection NOS', 'Gross Total Resection', 'Biopsy', nan,
       'Subtotal Resection'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="surgery-date" class="level3">
<h3 class="anchored" data-anchor-id="surgery-date">Surgery Date</h3>
<div id="cell-29" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"surgery_date"</span>] <span class="op">=</span> df[<span class="st">"surgery_date"</span>].<span class="bu">str</span>.strip()</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"surgery_date"</span>] <span class="op">=</span> df[<span class="st">"surgery_date"</span>].replace(<span class="st">"11/3/2023; 12/1/2023"</span>, <span class="st">"11/3/2023, 12/1/2023"</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">"surgery_1"</span>, <span class="st">"surgery_2"</span>, <span class="st">"surgery_3"</span>, <span class="st">"surgery_4"</span>]] <span class="op">=</span> df[<span class="st">"surgery_date"</span>].<span class="bu">str</span>.split(<span class="st">","</span>, expand <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"surgery_1"</span>] <span class="op">=</span> df[<span class="st">"surgery_1"</span>].replace({<span class="va">None</span>: np.nan})</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"surgery_2"</span>] <span class="op">=</span> df[<span class="st">"surgery_2"</span>].replace({<span class="va">None</span>: np.nan})</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"surgery_3"</span>] <span class="op">=</span> df[<span class="st">"surgery_3"</span>].replace({<span class="va">None</span>: np.nan})</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"surgery_4"</span>] <span class="op">=</span> df[<span class="st">"surgery_4"</span>].replace({<span class="va">None</span>: np.nan})</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">patient_id</th>
<th data-quarto-table-cell-role="th">gender</th>
<th data-quarto-table-cell-role="th">race</th>
<th data-quarto-table-cell-role="th">diagnosis_age</th>
<th data-quarto-table-cell-role="th">exclude</th>
<th data-quarto-table-cell-role="th">vital_status</th>
<th data-quarto-table-cell-role="th">institution_type</th>
<th data-quarto-table-cell-role="th">overall_survival</th>
<th data-quarto-table-cell-role="th">resection_extent</th>
<th data-quarto-table-cell-role="th">surgery_date</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">other_mutations</th>
<th data-quarto-table-cell-role="th">mitotic_activity_increase</th>
<th data-quarto-table-cell-role="th">specific_mitotic</th>
<th data-quarto-table-cell-role="th">caris</th>
<th data-quarto-table-cell-role="th">dna_profile</th>
<th data-quarto-table-cell-role="th">methylation_result</th>
<th data-quarto-table-cell-role="th">surgery_1</th>
<th data-quarto-table-cell-role="th">surgery_2</th>
<th data-quarto-table-cell-role="th">surgery_3</th>
<th data-quarto-table-cell-role="th">surgery_4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1.0</td>
<td>Male</td>
<td>other</td>
<td>79.0</td>
<td>0.0</td>
<td>lost to follow up</td>
<td>ER</td>
<td>NaN</td>
<td>Resection NOS</td>
<td>12/2/2024</td>
<td>...</td>
<td>NaN</td>
<td>scattered</td>
<td>NaN</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
<td>12/2/2024</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>10.0</td>
<td>Male</td>
<td>black</td>
<td>65.0</td>
<td>0.0</td>
<td>alive</td>
<td>ER</td>
<td>NaN</td>
<td>Resection NOS</td>
<td>4/23/2024</td>
<td>...</td>
<td>TP53, PTEN</td>
<td>easily identified</td>
<td>NaN</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
<td>4/23/2024</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>100.0</td>
<td>Female</td>
<td>white</td>
<td>77.0</td>
<td>0.0</td>
<td>dead</td>
<td>outpatient clinic</td>
<td>11.00</td>
<td>Gross Total Resection</td>
<td>12/4/2023</td>
<td>...</td>
<td>NaN</td>
<td>frequent</td>
<td>NaN</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
<td>12/4/2023</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>101.0</td>
<td>Female</td>
<td>black</td>
<td>59.0</td>
<td>0.0</td>
<td>dead</td>
<td>outpatient clinic</td>
<td>4.75</td>
<td>Biopsy</td>
<td>11/30/2023</td>
<td>...</td>
<td>NaN</td>
<td>1to5</td>
<td>2to3</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
<td>11/30/2023</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>102.0</td>
<td>Female</td>
<td>black</td>
<td>61.0</td>
<td>0.0</td>
<td>lost to follow up</td>
<td>ER</td>
<td>NaN</td>
<td>Resection NOS</td>
<td>7/29/2023, 11/15/2023, 4/28/2024</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
<td>7/29/2023</td>
<td>11/15/2023</td>
<td>4/28/2024</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>5 rows × 51 columns</p>
</div>
</div>
</div>
<div id="cell-30" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"surgery_1"</span>] <span class="op">=</span> df[<span class="st">"surgery_1"</span>].replace(<span class="st">"11/28-29/2023"</span>, <span class="st">"11/28/2023"</span>)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"surgery_1"</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">"surgery_1"</span>], <span class="bu">format</span><span class="op">=</span><span class="st">"mixed"</span>, errors<span class="op">=</span><span class="st">"coerce"</span>)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"surgery_2"</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">"surgery_2"</span>], <span class="bu">format</span><span class="op">=</span><span class="st">"mixed"</span>, errors<span class="op">=</span><span class="st">"coerce"</span>)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"surgery_3"</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">"surgery_3"</span>], <span class="bu">format</span><span class="op">=</span><span class="st">"mixed"</span>, errors<span class="op">=</span><span class="st">"coerce"</span>)</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"surgery_4"</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">"surgery_4"</span>], <span class="bu">format</span><span class="op">=</span><span class="st">"mixed"</span>, errors<span class="op">=</span><span class="st">"coerce"</span>)</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'weeks_diagnosis_to_surgery_2'</span>] <span class="op">=</span> (df[<span class="st">'surgery_2'</span>] <span class="op">-</span> df[<span class="st">'surgery_1'</span>]).dt.days <span class="op">//</span> <span class="dv">7</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'weeks_diagnosis_to_surgery_3'</span>] <span class="op">=</span> (df[<span class="st">'surgery_3'</span>] <span class="op">-</span> df[<span class="st">'surgery_1'</span>]).dt.days <span class="op">//</span> <span class="dv">7</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'weeks_diagnosis_to_surgery_4'</span>] <span class="op">=</span> (df[<span class="st">'surgery_4'</span>] <span class="op">-</span> df[<span class="st">'surgery_1'</span>]).dt.days <span class="op">//</span> <span class="dv">7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-31" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">patient_id</th>
<th data-quarto-table-cell-role="th">gender</th>
<th data-quarto-table-cell-role="th">race</th>
<th data-quarto-table-cell-role="th">diagnosis_age</th>
<th data-quarto-table-cell-role="th">exclude</th>
<th data-quarto-table-cell-role="th">vital_status</th>
<th data-quarto-table-cell-role="th">institution_type</th>
<th data-quarto-table-cell-role="th">overall_survival</th>
<th data-quarto-table-cell-role="th">resection_extent</th>
<th data-quarto-table-cell-role="th">surgery_date</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">caris</th>
<th data-quarto-table-cell-role="th">dna_profile</th>
<th data-quarto-table-cell-role="th">methylation_result</th>
<th data-quarto-table-cell-role="th">surgery_1</th>
<th data-quarto-table-cell-role="th">surgery_2</th>
<th data-quarto-table-cell-role="th">surgery_3</th>
<th data-quarto-table-cell-role="th">surgery_4</th>
<th data-quarto-table-cell-role="th">weeks_diagnosis_to_surgery_2</th>
<th data-quarto-table-cell-role="th">weeks_diagnosis_to_surgery_3</th>
<th data-quarto-table-cell-role="th">weeks_diagnosis_to_surgery_4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1.0</td>
<td>Male</td>
<td>other</td>
<td>79.0</td>
<td>0.0</td>
<td>lost to follow up</td>
<td>ER</td>
<td>NaN</td>
<td>Resection NOS</td>
<td>12/2/2024</td>
<td>...</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
<td>2024-12-02</td>
<td>NaT</td>
<td>NaT</td>
<td>NaT</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>10.0</td>
<td>Male</td>
<td>black</td>
<td>65.0</td>
<td>0.0</td>
<td>alive</td>
<td>ER</td>
<td>NaN</td>
<td>Resection NOS</td>
<td>4/23/2024</td>
<td>...</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
<td>2024-04-23</td>
<td>NaT</td>
<td>NaT</td>
<td>NaT</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>100.0</td>
<td>Female</td>
<td>white</td>
<td>77.0</td>
<td>0.0</td>
<td>dead</td>
<td>outpatient clinic</td>
<td>11.00</td>
<td>Gross Total Resection</td>
<td>12/4/2023</td>
<td>...</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
<td>2023-12-04</td>
<td>NaT</td>
<td>NaT</td>
<td>NaT</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>101.0</td>
<td>Female</td>
<td>black</td>
<td>59.0</td>
<td>0.0</td>
<td>dead</td>
<td>outpatient clinic</td>
<td>4.75</td>
<td>Biopsy</td>
<td>11/30/2023</td>
<td>...</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
<td>2023-11-30</td>
<td>NaT</td>
<td>NaT</td>
<td>NaT</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>102.0</td>
<td>Female</td>
<td>black</td>
<td>61.0</td>
<td>0.0</td>
<td>lost to follow up</td>
<td>ER</td>
<td>NaN</td>
<td>Resection NOS</td>
<td>7/29/2023, 11/15/2023, 4/28/2024</td>
<td>...</td>
<td>No</td>
<td>No</td>
<td>NaN</td>
<td>2023-07-29</td>
<td>2023-11-15</td>
<td>2024-04-28</td>
<td>NaT</td>
<td>15.0</td>
<td>39.0</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>5 rows × 54 columns</p>
</div>
</div>
</div>
</section>
<section id="number-of-surgeries" class="level3">
<h3 class="anchored" data-anchor-id="number-of-surgeries">Number of Surgeries</h3>
<div id="cell-33" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"num_surgeries"</span>] <span class="op">=</span> df[<span class="st">"num_surgeries"</span>].replace({<span class="st">"?3"</span>: <span class="st">"≥3"</span>})</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"num_surgeries"</span>] <span class="op">=</span> df[<span class="st">"num_surgeries"</span>].replace({<span class="st">"3"</span>: <span class="st">"≥3"</span>})</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"num_surgeries"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>array(['1', '≥3', '2', nan, '0'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="number-of-radiation-cycles" class="level3">
<h3 class="anchored" data-anchor-id="number-of-radiation-cycles">Number of Radiation Cycles</h3>
<div id="cell-35" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"num_radiations"</span>].unique()</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>na <span class="op">=</span> [<span class="st">'1- SRS'</span>, <span class="st">'unsure- UVA'</span>]</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>less1 <span class="op">=</span> [<span class="st">'1- 2 wks'</span>]</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>one <span class="op">=</span> [<span class="st">"1"</span>, <span class="st">"1- 3/18-4/5"</span>, <span class="st">'1 - 3 weeks'</span>, <span class="st">'1 (3 weeks)'</span>, <span class="st">'1- palliative rad'</span>, <span class="st">'1- w/ boost'</span>, <span class="st">"1- palliative "</span>]</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>less2 <span class="op">=</span> [<span class="st">"?2"</span>, <span class="st">'1 plus 1 week'</span>]</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>three <span class="op">=</span> [<span class="st">'?3'</span>]</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>mapping_rad <span class="op">=</span> {k: np.nan <span class="cf">for</span> k <span class="kw">in</span> na}</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>mapping_rad.update({k: <span class="st">"&lt;1"</span> <span class="cf">for</span> k <span class="kw">in</span> less1})</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>mapping_rad.update({k: <span class="st">"1"</span> <span class="cf">for</span> k <span class="kw">in</span> one})</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>mapping_rad.update({k: <span class="st">"&lt;2"</span> <span class="cf">for</span> k <span class="kw">in</span> less2})</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>mapping_rad.update({k: <span class="st">"≥3"</span> <span class="cf">for</span> k <span class="kw">in</span> three})</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"num_radiations"</span>] <span class="op">=</span> df[<span class="st">"num_radiations"</span>].replace(mapping_rad)</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"num_radiations"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>array([nan, '1', '0', '2', '≥3', '&lt;1', '&lt;2'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="number-of-chemotherapy-cycles" class="level3">
<h3 class="anchored" data-anchor-id="number-of-chemotherapy-cycles">Number of Chemotherapy Cycles</h3>
<div id="cell-37" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"num_chemo"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>array([nan, '1', '&lt;2', '&lt;1', '?3', '0', '2', '0.33', 'unsure- UVA',
       '1+ some adjuvant', '1- clinical trial NIH',
       '3- clinical trial too'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-38" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"num_chemo"</span>] <span class="op">=</span> df[<span class="st">"num_chemo"</span>].replace({<span class="st">"unsure- UVA"</span> : np.nan})</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>less1 <span class="op">=</span> [<span class="st">"&lt;1"</span>, <span class="st">"0.33"</span>]</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>one <span class="op">=</span> [<span class="st">"1"</span>, <span class="st">"1- clinical trial NIH"</span>]</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>less2 <span class="op">=</span> [<span class="st">"1+ some adjuvant"</span>]</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>three <span class="op">=</span> [<span class="st">"?3"</span>, <span class="st">'3- clinical trial too'</span>]</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>mapping_chemo <span class="op">=</span> {k: <span class="st">"&lt;1"</span> <span class="cf">for</span> k <span class="kw">in</span> less1}</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>mapping_chemo.update({k: <span class="st">"1"</span> <span class="cf">for</span> k <span class="kw">in</span> one})</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>mapping_chemo.update({k: <span class="st">"&lt;2"</span> <span class="cf">for</span> k <span class="kw">in</span> less2})</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>mapping_chemo.update({k: <span class="st">"≥3"</span> <span class="cf">for</span> k <span class="kw">in</span> three})</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"num_chemo"</span>] <span class="op">=</span> df[<span class="st">"num_chemo"</span>].replace(mapping_chemo)</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"num_chemo"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>array([nan, '1', '&lt;2', '&lt;1', '≥3', '0', '2'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="discontinued-treatment" class="level3">
<h3 class="anchored" data-anchor-id="discontinued-treatment">Discontinued Treatment?</h3>
<div id="cell-40" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"discontinued_treatment"</span>].unique()</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>yes <span class="op">=</span> [<span class="st">"yes"</span>, <span class="st">"Y "</span>, <span class="st">"Y"</span>, <span class="st">"Yes"</span>]</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>no <span class="op">=</span> [<span class="st">"no"</span>, <span class="st">"N"</span>, <span class="st">"No"</span>]</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>mapping_dt <span class="op">=</span> {k: <span class="st">"yes"</span> <span class="cf">for</span> k <span class="kw">in</span> yes}</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>mapping_dt.update({k: <span class="st">"no"</span> <span class="cf">for</span> k <span class="kw">in</span> no})</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"discontinued_treatment"</span>] <span class="op">=</span> df[<span class="st">"discontinued_treatment"</span>].replace(mapping_dt)</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"discontinued_treatment"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>array([nan, 'no', 'yes'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-41" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>mask <span class="op">=</span> (df[<span class="st">"num_chemo"</span>] <span class="op">==</span> <span class="st">"0"</span>) <span class="op">&amp;</span> (df[<span class="st">"num_radiations"</span>] <span class="op">==</span> <span class="st">"0"</span>)</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>df.loc[mask, <span class="st">"discontinued_treatment"</span>] <span class="op">=</span> np.nan</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="time-from-surgery-to-radiation" class="level3">
<h3 class="anchored" data-anchor-id="time-from-surgery-to-radiation">Time from Surgery to Radiation</h3>
<div id="cell-43" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"time_surgery_radiation"</span>] <span class="op">=</span> df[<span class="st">"time_surgery_radiation"</span>].replace({<span class="st">"unsure- UVA"</span> : np.nan})</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"time_surgery_radiation"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>array([nan, '15', '7', '5', '8', '11', '6', '15.5', '9', '4', '7.5', '3',
       '12', '13', '10', '1', '24', '2', '14', '37', '16', '267', '17'],
      dtype=object)</code></pre>
</div>
</div>
</section>
<section id="received-stupp-protocol" class="level3">
<h3 class="anchored" data-anchor-id="received-stupp-protocol">Received Stupp Protocol?</h3>
<div id="cell-45" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"received_stupp"</span>].unique()</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>yes <span class="op">=</span> [<span class="st">"yes"</span>, <span class="st">"yes "</span>, <span class="st">"Yes "</span>, <span class="st">"Yes?"</span>, <span class="st">"Yes "</span>, <span class="st">"Yes- 3 weeks"</span>, <span class="st">"Yes"</span>]</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>no <span class="op">=</span> [<span class="st">"no"</span>, <span class="st">"No "</span>, <span class="st">"No"</span>, <span class="st">"N"</span>]</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>na <span class="op">=</span> [<span class="st">"unsure"</span>, <span class="st">"unsure- UVA"</span>]</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>mapping_stupp <span class="op">=</span> {k: <span class="st">"yes"</span> <span class="cf">for</span> k <span class="kw">in</span> yes}</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>mapping_stupp.update({k: <span class="st">"no"</span> <span class="cf">for</span> k <span class="kw">in</span> no})</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>mapping_stupp.update({k: <span class="st">"no"</span> <span class="cf">for</span> k <span class="kw">in</span> na})</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"received_stupp"</span>] <span class="op">=</span> df[<span class="st">"received_stupp"</span>].replace(mapping_stupp)</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"received_stupp"</span>] <span class="op">=</span> df[<span class="st">"received_stupp"</span>].fillna(<span class="st">"no"</span>)</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"received_stupp"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>array(['no', 'yes'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="discontinued-stupps" class="level3">
<h3 class="anchored" data-anchor-id="discontinued-stupps">Discontinued Stupps?</h3>
<div id="cell-47" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"discontinued_stupps"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>array(['No', 'no', 'yes', nan, 'Yes', 'N'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-48" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>yes <span class="op">=</span> [<span class="st">"yes"</span>, <span class="st">"Yes"</span>]</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>no <span class="op">=</span> [<span class="st">"No"</span>, <span class="st">"no"</span>, <span class="st">"N"</span>]</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>mapping_dt <span class="op">=</span> {k: <span class="st">"yes"</span> <span class="cf">for</span> k <span class="kw">in</span> yes}</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>mapping_dt.update({k: <span class="st">"no"</span> <span class="cf">for</span> k <span class="kw">in</span> no})</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"discontinued_stupps"</span>] <span class="op">=</span> df[<span class="st">"discontinued_stupps"</span>].replace(mapping_dt)</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"discontinued_stupps"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<pre><code>array(['no', 'yes', nan], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="time-from-symptoms-to-diagnosis" class="level3">
<h3 class="anchored" data-anchor-id="time-from-symptoms-to-diagnosis">Time From Symptoms to Diagnosis</h3>
<div id="cell-50" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(df[<span class="st">"time_symptoms_diagnosis"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>pandas.core.series.Series</code></pre>
</div>
</div>
<div id="cell-51" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"time_symptoms_diagnosis"</span>] <span class="op">=</span> df[<span class="st">"time_symptoms_diagnosis"</span>].astype(<span class="bu">str</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"time_symptoms_diagnosis"</span>] <span class="op">=</span> df[<span class="st">"time_symptoms_diagnosis"</span>].<span class="bu">str</span>.strip()</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"time_symptoms_diagnosis"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>array(['0.5', '0.25', '1.0', '2.0', '0.75', '3.0', 'nan', '1.5', '2.5',
       '1.25', '0.0', '6.5', '7.0', '4.75', '24.0', '9.0', '0.33', '8.25',
       '9.5', '2.25', '6.0', '12.0', '8.0', '1.75', '4.0', '5.25', '5.5',
       '3.25', '3.5', '5.0', '124.0', '4.25'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-52" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"time_symptoms_diagnosis_weeks"</span>] <span class="op">=</span> df[<span class="st">"time_symptoms_diagnosis"</span>] <span class="op">*</span> <span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="time-from-symptoms-to-death" class="level3">
<h3 class="anchored" data-anchor-id="time-from-symptoms-to-death">Time From Symptoms to Death</h3>
<div id="cell-54" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"time_symptoms_death"</span>] <span class="op">=</span> df[<span class="st">"time_symptoms_death"</span>].astype(<span class="bu">str</span>)</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"time_symptoms_death"</span>] <span class="op">=</span> df[<span class="st">"time_symptoms_death"</span>].<span class="bu">str</span>.strip()</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"time_symptoms_death"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>array(['nan', '11.5', '5.75', '6.0', '5.25', '14.75', '19.25', '15.0',
       '7.0', '16.0', '19.75', '7.5', '10.25', '8.5', '13.5', '12.25',
       '65.25', '1.25', '2.75', '4.0', '5.0', '21.5', '4.5', '10.75',
       '25.75', '15.5', '3.75', '14.0', '20.75', '23.75', '37.0', '15.75',
       '7.75', '27.0', '46.25', '9.5', '12.5', '8.25', '47.5', '15.25',
       '18.25', '30.5', '3.5', '0.75', '4.25', '1.75', '3.0', '0.5',
       '25.5', '61.5', '17.5', '4.75', '17.25', '24.5', '5.5', '34.75',
       '8.75', '22.0', '7.25', '20.5', '3.25', '6.25', '27.5', '13.25',
       '16.75', '45.5', '23.0', '11.0', '16.25', '10.5', '2.0', '2.25',
       '26.0', '29.75', '20.0', '14.25', '10.0', '20.25', '33.25', '6.75',
       '9.0', '16.5', '1.0', '2.5', '22.5', '28.25', '12.75', '0.25',
       '9.25', '18.0', '8.0', '12.0', '11.75', '132.25', '6.5'],
      dtype=object)</code></pre>
</div>
</div>
<div id="cell-55" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"time_symptoms_death_weeks"</span>] <span class="op">=</span> df[<span class="st">"time_symptoms_death"</span>] <span class="op">*</span> <span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="death-date" class="level3">
<h3 class="anchored" data-anchor-id="death-date">Death Date</h3>
<div id="cell-57" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"date_of_death"</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">"date_of_death"</span>])</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'weeks_diagnosis_to_death'</span>] <span class="op">=</span> (df[<span class="st">'date_of_death'</span>] <span class="op">-</span> df[<span class="st">'surgery_1'</span>]).dt.days <span class="op">//</span> <span class="dv">7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="on-treatment-last-visit" class="level3">
<h3 class="anchored" data-anchor-id="on-treatment-last-visit">On Treatment Last Visit?</h3>
<div id="cell-59" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"on_treatment_last_visit"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="38">
<pre><code>array(['no', 'No', nan, 'no ', 'Yes', 'No ', 'yes'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-60" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>yes <span class="op">=</span> [<span class="st">"yes"</span>, <span class="st">"Yes"</span>]</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>no <span class="op">=</span> [<span class="st">"no"</span>, <span class="st">"No"</span>, <span class="st">"no "</span>, <span class="st">"No "</span>]</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>mapping_treatlv <span class="op">=</span> {k: <span class="st">"yes"</span> <span class="cf">for</span> k <span class="kw">in</span> yes}</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>mapping_treatlv.update({k: <span class="st">"no"</span> <span class="cf">for</span> k <span class="kw">in</span> no})</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"on_treatment_last_visit"</span>] <span class="op">=</span> df[<span class="st">"on_treatment_last_visit"</span>].replace(mapping_treatlv)</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"on_treatment_last_visit"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>array(['no', nan, 'yes'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="number-of-lobes-involved" class="level3">
<h3 class="anchored" data-anchor-id="number-of-lobes-involved">Number of Lobes Involved</h3>
<div id="cell-62" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"num_lobes"</span>] <span class="op">=</span> df[<span class="st">"num_lobes"</span>].astype(<span class="bu">str</span>)</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"num_lobes"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="40">
<pre><code>array(['1.0', '2.0', 'nan', '0.0', '4.0', '3.0'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="lobes-involved" class="level3">
<h3 class="anchored" data-anchor-id="lobes-involved">Lobes Involved</h3>
<div id="cell-64" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"lobes_involved"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<pre><code>array(['occipital', 'temporal', 'frontal', 'frontal, parietal',
       'frontal, parietal ', 'frontal ', nan, 'parietal ',
       'temporal, parietal', 'temporal, frontal ', 'temporal, occipital',
       'Frontal, Parietal, Occipital, Temporal', 'parietal, occipital',
       'frontal, temporal ', 'frontal, temporal', 'temporal ',
       'frontal, temporal, parietal', 'parietal',
       'frontal, temporal, temporal', 'parietal, frontal',
       'temporal, frontal', 'occipital, temporal',
       'parietal, occipital, temporal', 'parietal, temporal, occipital',
       'parietal, temporal, frontal ', 'parietal, temporal',
       'temporal, parietal, occipital', 'Temporal, Parietal',
       'frontal, occipital', 'occipital, temporal, frontal ',
       'parietal, occipital, frontal', 'temporal, occiptial',
       'parietal, temporal, occipital, frontal'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-65" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>standard_lobes <span class="op">=</span> [<span class="st">'frontal'</span>, <span class="st">'parietal'</span>, <span class="st">'temporal'</span>, <span class="st">'occipital'</span>]</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>typo_map <span class="op">=</span> {</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'occiptial'</span>: <span class="st">'occipital'</span>,</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'frontal '</span>: <span class="st">'frontal'</span>,</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'temporal '</span>: <span class="st">'temporal'</span>,</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'parietal '</span>: <span class="st">'parietal'</span>,</span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'temporal, temporal'</span>: <span class="st">'temporal'</span>,  </span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'frontal, temporal, temporal'</span>: <span class="st">'frontal, temporal'</span>,</span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> clean_lobes(entry):</span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> pd.isna(entry):</span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> []</span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a>    entry <span class="op">=</span> typo_map.get(entry.strip(), entry.strip())</span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb71-18"><a href="#cb71-18" aria-hidden="true" tabindex="-1"></a>    lobes <span class="op">=</span> [typo_map.get(l.strip().lower(), l.strip().lower()) <span class="cf">for</span> l <span class="kw">in</span> entry.split(<span class="st">','</span>)]</span>
<span id="cb71-19"><a href="#cb71-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb71-20"><a href="#cb71-20" aria-hidden="true" tabindex="-1"></a>    cleaned <span class="op">=</span> <span class="bu">list</span>(<span class="bu">dict</span>.fromkeys(lobes))</span>
<span id="cb71-21"><a href="#cb71-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> cleaned</span>
<span id="cb71-22"><a href="#cb71-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-23"><a href="#cb71-23" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'lobes_clean'</span>] <span class="op">=</span> df[<span class="st">'lobes_involved'</span>].<span class="bu">apply</span>(clean_lobes)</span>
<span id="cb71-24"><a href="#cb71-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-25"><a href="#cb71-25" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> label <span class="kw">in</span> standard_lobes:</span>
<span id="cb71-26"><a href="#cb71-26" aria-hidden="true" tabindex="-1"></a>    df[label] <span class="op">=</span> df[<span class="st">'lobes_clean'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> lobes: <span class="st">'yes'</span> <span class="cf">if</span> label <span class="kw">in</span> lobes <span class="cf">else</span> <span class="st">'no'</span>)</span>
<span id="cb71-27"><a href="#cb71-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-28"><a href="#cb71-28" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'lobes_clean'</span>] <span class="op">=</span> df[<span class="st">'lobes_clean'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="st">';'</span>.join(x))</span>
<span id="cb71-29"><a href="#cb71-29" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-66" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'lobes_clean'</span>] <span class="op">=</span> (</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'lobes_clean'</span>]</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">str</span>.split(<span class="st">';'</span>)                 </span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">sorted</span>(<span class="bu">map</span>(<span class="bu">str</span>.strip, x)))  </span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="st">';'</span>.join(x))   </span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-67" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'lobes_clean'</span>] <span class="op">=</span> df[<span class="st">'lobes_clean'</span>].replace(<span class="st">''</span>, <span class="st">'none'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-68" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"lobes_clean"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<pre><code>array(['occipital', 'temporal', 'frontal', 'frontal;parietal', 'none',
       'parietal', 'parietal;temporal', 'frontal;temporal',
       'occipital;temporal', 'frontal;occipital;parietal;temporal',
       'occipital;parietal', 'frontal;parietal;temporal',
       'occipital;parietal;temporal', 'frontal;occipital',
       'frontal;occipital;temporal', 'frontal;occipital;parietal'],
      dtype=object)</code></pre>
</div>
</div>
</section>
<section id="other-brain-regions" class="level3">
<h3 class="anchored" data-anchor-id="other-brain-regions">Other Brain Regions</h3>
<div id="cell-70" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"other_brain_regions"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">
<pre><code>array([nan, 'corpus callosum, intrahemispheric ',
       'insular, midline shift, corpus callosum', 'intra-axial',
       'intra-axial, midline shift, basil ganglia', 'midline shift',
       'optic nerve', 'thalamus, corpus callosum', 'insula',
       'midbrain, basil ganglia, corpus callosum', 'insular',
       'centrum semiovale, basal ganglia, corona radiatia', 'thalamus',
       'basal ganglia, thalamus, pons, parafalcine lesions, midbrain',
       'basal ganglia, thalamus', 'thalamus, midbrain', 'insula ',
       'intraventricular', 'brainstem', 'corpus callosum',
       'insular cortex, basal ganglia, brainstem, peri-insular, pons, midline',
       'corpus callosum, thalamus, midline', 'pons, cerebellar peduncle',
       'optic nerve, optic tract, hypothalamus, basal ganglia ',
       'cerebellum', 'periventricular region, corpus callosum ',
       'thalamus ', 'basal ganglia', 'postcentral gyrus, intra-axial',
       'corpus callosum, thalamus ', 'periventricular, corpus callosum',
       'corpus callosum ', 'spinal cord ', 'midline', 'insular, midline',
       'basal ganglia, corpus callosum, thalamus, ganglia thalamic capsule',
       'corpus callosum, crosses the midline',
       'midline, right lateral ventricle', 'corpus callosum, midline',
       'thalamus, hippocampus, insula', 'Intraventricular',
       'basal ganglia, corpus callosum', 'thalamus, basal ganglia',
       'pineal gland', 'midbrain, corpus callosum', 'intraparenchyma',
       'hippocampus, insula ', 'basal ganglia ', 'insula, midline',
       'basal ganglia, thalamus ', 'hippocampus, basal ganglia ',
       'corpus callosum, intra-axial', 'Thalamus', 'caudate',
       'intra-axial, corpus callosum', 'pontomesenphalic junction',
       'basil ganglia', 'thalamus, midbrain, basal ganglia',
       'cerebellum, basal ganglia, hippocampus',
       'midline, corpus callosum', 'left insula, thalamus', 'N',
       'cerebellum, thalamus, basil ganglia', 'brainstem (cerebellum)'],
      dtype=object)</code></pre>
</div>
</div>
<div id="cell-71" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>region_typo_map <span class="op">=</span> {</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'basil ganglia'</span>: <span class="st">'basal ganglia'</span>,</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'thalamus '</span>: <span class="st">'thalamus'</span>,</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'basal ganglia '</span>: <span class="st">'basal ganglia'</span>,</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'corpus callosum '</span>: <span class="st">'corpus callosum'</span>,</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'insula '</span>: <span class="st">'insula'</span>,</span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'insular'</span>: <span class="st">'insula'</span>,</span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'insular region'</span>: <span class="st">'insula'</span>,</span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'insular cortex'</span>: <span class="st">'insula'</span>,</span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'midline shift'</span>: <span class="st">'midline'</span>,</span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Intraventricular'</span>: <span class="st">'intraventricular'</span>,</span>
<span id="cb78-12"><a href="#cb78-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'corpus callosum, crosses the midline'</span>: <span class="st">'corpus callosum, midline'</span>,</span>
<span id="cb78-13"><a href="#cb78-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'cerebellum '</span>: <span class="st">'cerebellum'</span>,</span>
<span id="cb78-14"><a href="#cb78-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'pontomesenphalic junction'</span>: <span class="st">'pontomesencephalic junction'</span>,</span>
<span id="cb78-15"><a href="#cb78-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'N'</span>: <span class="va">None</span>,</span>
<span id="cb78-16"><a href="#cb78-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb78-17"><a href="#cb78-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-18"><a href="#cb78-18" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> clean_regions(entry):</span>
<span id="cb78-19"><a href="#cb78-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> pd.isna(entry) <span class="kw">or</span> entry <span class="op">==</span> <span class="st">'N'</span>:</span>
<span id="cb78-20"><a href="#cb78-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> []</span>
<span id="cb78-21"><a href="#cb78-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-22"><a href="#cb78-22" aria-hidden="true" tabindex="-1"></a>    entry <span class="op">=</span> region_typo_map.get(entry.strip(), entry.strip())</span>
<span id="cb78-23"><a href="#cb78-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> entry <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb78-24"><a href="#cb78-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> []</span>
<span id="cb78-25"><a href="#cb78-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb78-26"><a href="#cb78-26" aria-hidden="true" tabindex="-1"></a>    parts <span class="op">=</span> [region_typo_map.get(p.strip().lower(), p.strip().lower()) <span class="cf">for</span> p <span class="kw">in</span> entry.split(<span class="st">','</span>)]</span>
<span id="cb78-27"><a href="#cb78-27" aria-hidden="true" tabindex="-1"></a>    parts <span class="op">=</span> [p <span class="cf">for</span> p <span class="kw">in</span> parts <span class="cf">if</span> p]  </span>
<span id="cb78-28"><a href="#cb78-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">list</span>(<span class="bu">dict</span>.fromkeys(parts))  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-72" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> chain</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'other_regions_clean'</span>] <span class="op">=</span> df[<span class="st">'other_brain_regions'</span>].<span class="bu">apply</span>(clean_regions)</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>all_regions <span class="op">=</span> <span class="bu">set</span>(chain.from_iterable(df[<span class="st">'other_regions_clean'</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-73" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> region <span class="kw">in</span> all_regions:</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>    df[region] <span class="op">=</span> df[<span class="st">'other_regions_clean'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="st">'yes'</span> <span class="cf">if</span> region <span class="kw">in</span> x <span class="cf">else</span> <span class="st">'no'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-74" class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">patient_id</th>
<th data-quarto-table-cell-role="th">gender</th>
<th data-quarto-table-cell-role="th">race</th>
<th data-quarto-table-cell-role="th">diagnosis_age</th>
<th data-quarto-table-cell-role="th">exclude</th>
<th data-quarto-table-cell-role="th">vital_status</th>
<th data-quarto-table-cell-role="th">institution_type</th>
<th data-quarto-table-cell-role="th">overall_survival</th>
<th data-quarto-table-cell-role="th">resection_extent</th>
<th data-quarto-table-cell-role="th">surgery_date</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">optic nerve</th>
<th data-quarto-table-cell-role="th">postcentral gyrus</th>
<th data-quarto-table-cell-role="th">pons</th>
<th data-quarto-table-cell-role="th">intraventricular</th>
<th data-quarto-table-cell-role="th">periventricular region</th>
<th data-quarto-table-cell-role="th">peri-insular</th>
<th data-quarto-table-cell-role="th">brainstem</th>
<th data-quarto-table-cell-role="th">cerebellum</th>
<th data-quarto-table-cell-role="th">pontomesencephalic junction</th>
<th data-quarto-table-cell-role="th">spinal cord</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1.0</td>
<td>Male</td>
<td>other</td>
<td>79.0</td>
<td>0.0</td>
<td>lost to follow up</td>
<td>ER</td>
<td>NaN</td>
<td>Resection NOS</td>
<td>12/2/2024</td>
<td>...</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>10.0</td>
<td>Male</td>
<td>black</td>
<td>65.0</td>
<td>0.0</td>
<td>alive</td>
<td>ER</td>
<td>NaN</td>
<td>Resection NOS</td>
<td>4/23/2024</td>
<td>...</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>100.0</td>
<td>Female</td>
<td>white</td>
<td>77.0</td>
<td>0.0</td>
<td>dead</td>
<td>outpatient clinic</td>
<td>11.00</td>
<td>Gross Total Resection</td>
<td>12/4/2023</td>
<td>...</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>101.0</td>
<td>Female</td>
<td>black</td>
<td>59.0</td>
<td>0.0</td>
<td>dead</td>
<td>outpatient clinic</td>
<td>4.75</td>
<td>Biopsy</td>
<td>11/30/2023</td>
<td>...</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>102.0</td>
<td>Female</td>
<td>black</td>
<td>61.0</td>
<td>0.0</td>
<td>lost to follow up</td>
<td>ER</td>
<td>NaN</td>
<td>Resection NOS</td>
<td>7/29/2023, 11/15/2023, 4/28/2024</td>
<td>...</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">289</td>
<td>98.0</td>
<td>Male</td>
<td>white</td>
<td>64.0</td>
<td>0.0</td>
<td>alive</td>
<td>outpatient clinic</td>
<td>NaN</td>
<td>Gross Total Resection</td>
<td>12/21/2023</td>
<td>...</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">290</td>
<td>99.0</td>
<td>Female</td>
<td>other</td>
<td>59.0</td>
<td>0.0</td>
<td>dead</td>
<td>ER</td>
<td>7.00</td>
<td>Resection NOS</td>
<td>11/7/2023, 12/8/2023</td>
<td>...</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">291</td>
<td>NaN</td>
<td>NaN</td>
<td>unknown</td>
<td>NaN</td>
<td>0.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">292</td>
<td>NaN</td>
<td>NaN</td>
<td>unknown</td>
<td>NaN</td>
<td>0.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">293</td>
<td>NaN</td>
<td>NaN</td>
<td>unknown</td>
<td>NaN</td>
<td>0.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
</tr>
</tbody>
</table>

<p>294 rows × 96 columns</p>
</div>
</div>
</div>
</section>
<section id="unqiue-clinical-findings" class="level3">
<h3 class="anchored" data-anchor-id="unqiue-clinical-findings">Unqiue Clinical Findings</h3>
<div id="cell-76" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># leaving for now because not really going to do a ton with this rn </span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"unique_clinical_findings"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="51">
<pre><code>array([nan, 'sarcomous features', 'in context of Lynch Syndrome',
       "Sjogren's syndrome", 'LMD', 'Hx carcinoma ',
       "Bell's palsy, childhood leukemia", "parkinson's",
       'Hx of ependymoma ', 'tumour crosses the midline',
       'extension towards thalamus and splenium', 'sarcomatous features',
       'in context of HIV ', 'in context of PD',
       'Hx of low grade glioma (20 years prior) and IPH',
       'Hx of squamous cell carcinoma', 'GI malignancies',
       'Hx of prostate adenocarcinoma', 'Hx of harvoni treatment',
       'leptomeningeal carcimatosis',
       'hx of breast cancer, sickle cell anemia',
       'hx of metastatic breast cancer, lung cancer', 'in context of AD',
       'C-spine injury ', 'hx of autonomic neuropathy',
       'Hx of T-cell lymphoma ', 'parkinsons, dementia',
       'Hx of prostate cancer', 'hx of breast cancer',
       'exposed to agent orange', 'basal/squamous cell carcinoma ', 'N',
       'Incidental pituitary adenoma', 'metastatic breast cancer',
       'Hx metastatic sarcomatoid carcinoma ',
       'Hx of esophageal adenocarcinoma', 'intraparenchymal',
       'epilepsy s/p right temporal resection 1998', 'MSH2 alterations'],
      dtype=object)</code></pre>
</div>
</div>
</section>
<section id="seizures-at-presentation" class="level3">
<h3 class="anchored" data-anchor-id="seizures-at-presentation">Seizures at Presentation</h3>
<div id="cell-78" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"seizures_presentation"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="52">
<pre><code>array(['no', nan, 'stroke vs seizure', 'yes', 'no ',
       '12/28/22 "seizure-like activity"',
       '"likely focal seizures" neuro 11/11/22',
       '"seizure-like"/ syncopal episode', 'unclear', 'Yes',
       'potentially- 9/26/23- or convulsive syncope',
       'potentially- most likely etiology for transient weakness is focal onset seizure vs mass effect abutting motor strip',
       'yes- likely reefractory see 1/25/22 neurocrit note', 'yes ',
       'yes- "possible"'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-79" class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>yes <span class="op">=</span> [<span class="st">'yes'</span>, <span class="st">'potentially- 9/26/23- or convulsive syncope'</span>, <span class="st">'potentially- most likely etiology for transient weakness is focal onset seizure vs mass effect abutting motor strip'</span>, <span class="st">'yes- likely reefractory see 1/25/22 neurocrit note'</span>, <span class="st">'yes '</span>,</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>       <span class="st">'yes- "possible"'</span>, <span class="st">'12/28/22 "seizure-like activity"'</span>,</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>       <span class="st">'"likely focal seizures" neuro 11/11/22'</span>,</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>       <span class="st">'"seizure-like"/ syncopal episode'</span>, <span class="st">"Yes"</span>]</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>no <span class="op">=</span> [<span class="st">'no'</span>, <span class="st">'no '</span>]</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>unclear <span class="op">=</span> [<span class="st">'stroke vs seizure'</span>]</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>mapping_sp <span class="op">=</span> {k: <span class="st">"yes"</span> <span class="cf">for</span> k <span class="kw">in</span> yes}</span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>mapping_sp.update({k: <span class="st">"no"</span> <span class="cf">for</span> k <span class="kw">in</span> no})</span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a>mapping_sp.update({k: <span class="st">"unclear"</span> <span class="cf">for</span> k <span class="kw">in</span> unclear})</span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"seizures_presentation"</span>] <span class="op">=</span> df[<span class="st">"seizures_presentation"</span>].replace(mapping_sp) </span>
<span id="cb86-13"><a href="#cb86-13" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"seizures_presentation"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="53">
<pre><code>array(['no', nan, 'unclear', 'yes'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="seizures-later" class="level3">
<h3 class="anchored" data-anchor-id="seizures-later">Seizures Later</h3>
<div id="cell-81" class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"seizures_later"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="54">
<pre><code>array(['no', 'yes', nan, 'yes ', 'no ', 'yes- see ED note 3/14/2025',
       'subclinical seizures or postictal unsure', 'yes?'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-82" class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>yes <span class="op">=</span> [<span class="st">'yes'</span>, <span class="st">'yes- see ED note 3/14/2025'</span>, <span class="st">'yes '</span>, <span class="st">'yes?'</span>, <span class="st">'"period of unresponsiveness concerning for seizure" 2/8/23 palliative CRISP'</span>]</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>no <span class="op">=</span> [<span class="st">'no'</span>, <span class="st">'no '</span>]</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>unclear <span class="op">=</span> [<span class="st">'subclinical seizures or postictal unsure'</span>]</span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>mapping_sl <span class="op">=</span> {k: <span class="st">"yes"</span> <span class="cf">for</span> k <span class="kw">in</span> yes}</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>mapping_sl.update({k: <span class="st">"no"</span> <span class="cf">for</span> k <span class="kw">in</span> no})</span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>mapping_sl.update({k: <span class="st">"unclear"</span> <span class="cf">for</span> k <span class="kw">in</span> unclear})</span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"seizures_later"</span>] <span class="op">=</span> df[<span class="st">"seizures_later"</span>].replace(mapping_sl) </span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"seizures_later"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="55">
<pre><code>array(['no', 'yes', nan, 'unclear'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="dvt-or-pe-during-presentation" class="level3">
<h3 class="anchored" data-anchor-id="dvt-or-pe-during-presentation">DVT or PE During Presentation</h3>
<div id="cell-84" class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"dvt_pe_presentation"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="56">
<pre><code>array(['no', nan, 'No', 'yes', 'yes+ Hx of PE and DVT',
       'technically yes?', 'no ', 'no- hx of pe'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-85" class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>hist_dvt_pe <span class="op">=</span> [<span class="st">'yes+ Hx of PE and DVT'</span>, <span class="st">'No, but Hx of DVT'</span>, <span class="st">'Hx of DVT'</span>, <span class="st">'no- hx of pe'</span>]</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"dvt_pe_history"</span>] <span class="op">=</span> <span class="st">"placeholder"</span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"dvt_pe_history"</span>] <span class="op">=</span> df[<span class="st">"dvt_pe_presentation"</span>].isin(hist_dvt_pe).<span class="bu">map</span>({<span class="va">True</span>: <span class="st">"yes"</span>, <span class="va">False</span>: <span class="st">"no"</span>})</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"dvt_pe_history"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="57">
<pre><code>array(['no', 'yes'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-86" class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>yes <span class="op">=</span> [<span class="st">'yes'</span>, <span class="st">'technically yes?'</span>, <span class="st">'yes+ Hx of PE and DVT'</span>]</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>no <span class="op">=</span> [<span class="st">'no'</span>, <span class="st">'no '</span>, <span class="st">'No'</span>, <span class="st">'no- AVM'</span>, <span class="st">'no- AAA'</span>, <span class="st">'No, but Hx of DVT'</span>, <span class="st">'Hx of DVT'</span>, <span class="st">'no- hx of pe'</span>]</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>mapping_dvtpep <span class="op">=</span> {k: <span class="st">"yes"</span> <span class="cf">for</span> k <span class="kw">in</span> yes}</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>mapping_dvtpep.update({k: <span class="st">"no"</span> <span class="cf">for</span> k <span class="kw">in</span> no})</span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"dvt_pe_presentation"</span>] <span class="op">=</span> df[<span class="st">"dvt_pe_presentation"</span>].replace(mapping_dvtpep)</span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"dvt_pe_presentation"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="58">
<pre><code>array(['no', nan, 'yes'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="dvt-or-pe-during-course" class="level3">
<h3 class="anchored" data-anchor-id="dvt-or-pe-during-course">DVT or PE During Course</h3>
<div id="cell-88" class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"dvt_pe_during"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="59">
<pre><code>array(['no', 'yes', nan, 'no ', 'no- AAA', 'Yes'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-89" class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>yes <span class="op">=</span> [<span class="st">'yes'</span>, <span class="st">'Yes'</span>]</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>no <span class="op">=</span> [<span class="st">'no'</span>, <span class="st">'no- AAA'</span>, <span class="st">"no "</span>]</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>mapping_dvtped <span class="op">=</span> {k: <span class="st">"yes"</span> <span class="cf">for</span> k <span class="kw">in</span> yes}</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>mapping_dvtped.update({k: <span class="st">"no"</span> <span class="cf">for</span> k <span class="kw">in</span> no})</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"dvt_pe_during"</span>] <span class="op">=</span> df[<span class="st">"dvt_pe_during"</span>].replace(mapping_dvtped)</span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"dvt_pe_during"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="60">
<pre><code>array(['no', 'yes', nan], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="microvascular-proliferation" class="level3">
<h3 class="anchored" data-anchor-id="microvascular-proliferation">Microvascular Proliferation</h3>
<div id="cell-91" class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"microvascular_proliferation"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="61">
<pre><code>array(['Y', 'N', nan, 'ND', 'Y '], dtype=object)</code></pre>
</div>
</div>
<div id="cell-92" class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>yes <span class="op">=</span> [<span class="st">'Y'</span>, <span class="st">'Y- suggestive, not def'</span>, <span class="st">'Y '</span>]</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>no <span class="op">=</span> [<span class="st">"N"</span>]</span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>unknown <span class="op">=</span> [<span class="st">'ND'</span>]</span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>mapping_mv <span class="op">=</span> {k: <span class="st">"yes"</span> <span class="cf">for</span> k <span class="kw">in</span> yes}</span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>mapping_mv.update({k: <span class="st">"no"</span> <span class="cf">for</span> k <span class="kw">in</span> no})</span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>mapping_mv.update({k: <span class="st">"unknown"</span> <span class="cf">for</span> k <span class="kw">in</span> unknown})</span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"microvascular_proliferation"</span>] <span class="op">=</span> df[<span class="st">"microvascular_proliferation"</span>].replace(mapping_mv)</span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"microvascular_proliferation"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="62">
<pre><code>array(['yes', 'no', nan, 'unknown'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="early-microvascular-proliferation" class="level3">
<h3 class="anchored" data-anchor-id="early-microvascular-proliferation">Early Microvascular Proliferation</h3>
<div id="cell-94" class="cell" data-execution_count="63">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"mp_early"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="63">
<pre><code>array(['N', nan, 'N ', 'Y'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-95" class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>yes <span class="op">=</span> [<span class="st">"Y"</span>]</span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>no <span class="op">=</span> [<span class="st">"N"</span>, <span class="st">"N "</span>]</span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>mapping_emp <span class="op">=</span> {k: <span class="st">"yes"</span> <span class="cf">for</span> k <span class="kw">in</span> yes}</span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>mapping_emp.update({k: <span class="st">"no"</span> <span class="cf">for</span> k <span class="kw">in</span> no})</span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"mp_early"</span>] <span class="op">=</span> df[<span class="st">"mp_early"</span>].replace(mapping_emp)</span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"mp_early"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="64">
<pre><code>array(['no', nan, 'yes'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="focal-microvascular-proliferation" class="level3">
<h3 class="anchored" data-anchor-id="focal-microvascular-proliferation">Focal Microvascular Proliferation</h3>
<div id="cell-97" class="cell" data-execution_count="65">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"mp_focal"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="65">
<pre><code>array(['Y', 'N', nan, 'N '], dtype=object)</code></pre>
</div>
</div>
<div id="cell-98" class="cell" data-execution_count="66">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>yes <span class="op">=</span> [<span class="st">"Y"</span>]</span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>no <span class="op">=</span> [<span class="st">"N"</span>, <span class="st">"N "</span>]</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>mapping_fmp <span class="op">=</span> {k: <span class="st">"yes"</span> <span class="cf">for</span> k <span class="kw">in</span> yes}</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>mapping_fmp.update({k: <span class="st">"no"</span> <span class="cf">for</span> k <span class="kw">in</span> no})</span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"mp_focal"</span>] <span class="op">=</span> df[<span class="st">"mp_focal"</span>].replace(mapping_fmp)</span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"mp_focal"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="66">
<pre><code>array(['yes', 'no', nan], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="necrosis" class="level3">
<h3 class="anchored" data-anchor-id="necrosis">Necrosis?</h3>
<div id="cell-100" class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"necrosis"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="67">
<pre><code>array(['Y', 'Y ', 'N ', 'N', nan, 'Y- patchy', 'Y- vague'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-101" class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>yes <span class="op">=</span> [<span class="st">'Y'</span>, <span class="st">'Y '</span>, <span class="st">'Y- patchy'</span>, <span class="st">'Y- vague'</span>]</span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>no <span class="op">=</span> [<span class="st">'N '</span>, <span class="st">'N'</span>]</span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>mapping_nec <span class="op">=</span> {k: <span class="st">"yes"</span> <span class="cf">for</span> k <span class="kw">in</span> yes}</span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>mapping_nec.update({k: <span class="st">"no"</span> <span class="cf">for</span> k <span class="kw">in</span> no})</span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"necrosis"</span>] <span class="op">=</span> df[<span class="st">"necrosis"</span>].replace(mapping_nec)</span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"necrosis"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="68">
<pre><code>array(['yes', 'no', nan], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="chromosomal" class="level3">
<h3 class="anchored" data-anchor-id="chromosomal">+7/-10 Chromosomal</h3>
<div id="cell-103" class="cell" data-execution_count="69">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"+7_-10_chromosomal"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="69">
<pre><code>array([nan, 'Y', 'N', 'Y ', 'N '], dtype=object)</code></pre>
</div>
</div>
<div id="cell-104" class="cell" data-execution_count="70">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>yes <span class="op">=</span> [<span class="st">'Y'</span>, <span class="st">'Y '</span>]</span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>no <span class="op">=</span> [<span class="st">'N '</span>, <span class="st">'N'</span>]</span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>mapping_chro <span class="op">=</span> {k: <span class="st">"yes"</span> <span class="cf">for</span> k <span class="kw">in</span> yes}</span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a>mapping_chro.update({k: <span class="st">"no"</span> <span class="cf">for</span> k <span class="kw">in</span> no})</span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"+7_-10_chromosomal"</span>] <span class="op">=</span> df[<span class="st">"+7_-10_chromosomal"</span>].replace(mapping_chro)</span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"+7_-10_chromosomal"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="70">
<pre><code>array([nan, 'yes', 'no'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-105" class="cell" data-execution_count="71">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.rename(columns<span class="op">=</span>{<span class="st">"+7_-10_chromosomal"</span>: <span class="st">"chromosomal710"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="egfr-amplification" class="level3">
<h3 class="anchored" data-anchor-id="egfr-amplification">EGFR Amplification</h3>
<div id="cell-107" class="cell" data-execution_count="72">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"EGFR_amplification"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="72">
<pre><code>array([nan, 'N', 'Y', 'N ', 'ID'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-108" class="cell" data-execution_count="73">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>yes <span class="op">=</span> [<span class="st">'Y'</span>]</span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>no <span class="op">=</span> [<span class="st">'N '</span>, <span class="st">'N'</span>]</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>unknown <span class="op">=</span> [<span class="st">"ID"</span>]</span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a>mapping_egfr <span class="op">=</span> {k: <span class="st">"yes"</span> <span class="cf">for</span> k <span class="kw">in</span> yes}</span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a>mapping_egfr.update({k: <span class="st">"no"</span> <span class="cf">for</span> k <span class="kw">in</span> no})</span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a>mapping_egfr.update({k: <span class="st">"unknown"</span> <span class="cf">for</span> k <span class="kw">in</span> unknown})</span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"EGFR_amplification"</span>] <span class="op">=</span> df[<span class="st">"EGFR_amplification"</span>].replace(mapping_egfr)</span>
<span id="cb125-10"><a href="#cb125-10" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"EGFR_amplification"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="73">
<pre><code>array([nan, 'no', 'yes', 'unknown'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="tert-promoter" class="level3">
<h3 class="anchored" data-anchor-id="tert-promoter">TERT Promoter?</h3>
<div id="cell-110" class="cell" data-execution_count="74">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"TERT_promoter"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="74">
<pre><code>array([nan, 'Y', 'N', 'N '], dtype=object)</code></pre>
</div>
</div>
<div id="cell-111" class="cell" data-execution_count="75">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>yes <span class="op">=</span> [<span class="st">'Y'</span>]</span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>no <span class="op">=</span> [<span class="st">'N '</span>, <span class="st">'N'</span>]</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a>mapping_tert <span class="op">=</span> {k: <span class="st">"yes"</span> <span class="cf">for</span> k <span class="kw">in</span> yes}</span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a>mapping_tert.update({k: <span class="st">"no"</span> <span class="cf">for</span> k <span class="kw">in</span> no})</span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"TERT_promoter"</span>] <span class="op">=</span> df[<span class="st">"TERT_promoter"</span>].replace(mapping_tert)</span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"TERT_promoter"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="75">
<pre><code>array([nan, 'yes', 'no'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="ptert-variant" class="level3">
<h3 class="anchored" data-anchor-id="ptert-variant">pTERT Variant</h3>
<div id="cell-113" class="cell" data-execution_count="76">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"pTERT_variant"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="76">
<pre><code>array([nan, 'C124T', 'N', '1295220T', 'C146T', 'IC', 'ND'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-114" class="cell" data-execution_count="77">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>na <span class="op">=</span> [<span class="st">"N"</span>, <span class="st">"N "</span>]</span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>incon <span class="op">=</span> [<span class="st">"IC"</span>]</span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a>unknown <span class="op">=</span> [<span class="st">"ND"</span>]</span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a>mapping_ptert <span class="op">=</span> {k: np.nan <span class="cf">for</span> k <span class="kw">in</span> na}</span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a>mapping_ptert.update({k: <span class="st">"inconclusive"</span> <span class="cf">for</span> k <span class="kw">in</span> incon})</span>
<span id="cb133-7"><a href="#cb133-7" aria-hidden="true" tabindex="-1"></a>mapping_ptert.update({k: <span class="st">"unknown"</span> <span class="cf">for</span> k <span class="kw">in</span> unknown})</span>
<span id="cb133-8"><a href="#cb133-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-9"><a href="#cb133-9" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"pTERT_variant"</span>] <span class="op">=</span> df[<span class="st">"pTERT_variant"</span>].replace(mapping_ptert)</span>
<span id="cb133-10"><a href="#cb133-10" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"pTERT_variant"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="77">
<pre><code>array([nan, 'C124T', '1295220T', 'C146T', 'inconclusive', 'unknown'],
      dtype=object)</code></pre>
</div>
</div>
</section>
<section id="mgmt-methylation" class="level3">
<h3 class="anchored" data-anchor-id="mgmt-methylation">MGMT Methylation</h3>
<div id="cell-116" class="cell" data-execution_count="78">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"MGMT_methylation"</span>].unique()</span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"MGMT_methylation"</span>] <span class="op">=</span> df[<span class="st">"MGMT_methylation"</span>].replace({<span class="st">"M "</span> : <span class="st">"M"</span>})</span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"MGMT_methylation"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="78">
<pre><code>array(['UM', 'M', nan, 'UM '], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="ki67_li" class="level3">
<h3 class="anchored" data-anchor-id="ki67_li">Ki67_Li</h3>
<div id="cell-118" class="cell" data-execution_count="79">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Ki67_LI"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="79">
<pre><code>array(['&gt; 15%', nan, '&lt; 15%', '15%', '&gt;15%'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-119" class="cell" data-execution_count="80">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>above <span class="op">=</span> [<span class="st">'&gt; 15%'</span>, <span class="st">'&gt;15%'</span>]</span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>below <span class="op">=</span> [<span class="st">'&lt; 15%'</span>]</span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a>mapping_ki <span class="op">=</span> {k: <span class="st">"&gt;15%"</span> <span class="cf">for</span> k <span class="kw">in</span> above}</span>
<span id="cb139-5"><a href="#cb139-5" aria-hidden="true" tabindex="-1"></a>mapping_ki.update({k: <span class="st">"&lt;15%"</span> <span class="cf">for</span> k <span class="kw">in</span> below})</span>
<span id="cb139-6"><a href="#cb139-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-7"><a href="#cb139-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Ki67_LI"</span>] <span class="op">=</span> df[<span class="st">"Ki67_LI"</span>].replace(mapping_ki)</span>
<span id="cb139-8"><a href="#cb139-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Ki67_LI"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="80">
<pre><code>array(['&gt;15%', nan, '&lt;15%', '15%'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="ki67-specific" class="level3">
<h3 class="anchored" data-anchor-id="ki67-specific">Ki67 Specific</h3>
<div id="cell-121" class="cell" data-execution_count="81">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Ki67_specific"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="81">
<pre><code>array(['25%', '15-20%', '50%', nan, '8-10%', '30-40%', '20-25%', '30%',
       '20%', '25-30%', '10%', '15%', '40%', '4-5%', '90%', '&gt;50%',
       '20-30%', '1-2%', '10-15%', '2-3%', '80%', '8%', '70%', '16%',
       '5%', '5-7%', '5-10%', 'high', '2%', '10-40%', '&lt;1%', '50-60%',
       '&gt;90%', '90-95%', '&gt;1%', '&gt;30%'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-122" class="cell" data-execution_count="82">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Ki67_level_10_50"</span>] <span class="op">=</span> np.nan</span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>low <span class="op">=</span> [<span class="st">"4-5%"</span>, <span class="st">"1-2%"</span>, <span class="st">"2-3%"</span>, <span class="st">"5%"</span>, <span class="st">"2%"</span>, <span class="st">"&lt;1%"</span>, <span class="st">"&gt;1%"</span>, <span class="st">'10%'</span>, <span class="st">'8-10%'</span>, <span class="st">'5-7%'</span>, <span class="st">'5-10%'</span>, <span class="st">'8%'</span>]</span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a>high <span class="op">=</span> [<span class="st">"50%"</span>, <span class="st">"90%"</span>, <span class="st">"&gt;50%"</span>, <span class="st">"80%"</span>, <span class="st">"70%"</span>, <span class="st">"&gt;90%"</span>, <span class="st">"90-95%"</span>, <span class="st">'50-60%'</span>]</span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true" tabindex="-1"></a>middle <span class="op">=</span> [<span class="st">'25%'</span>, <span class="st">'15-20%'</span>, <span class="st">'&gt;30%'</span>,  <span class="st">'20-25%'</span>, <span class="st">'20%'</span>, <span class="st">'30-40%'</span>, <span class="st">'30%'</span>, </span>
<span id="cb143-6"><a href="#cb143-6" aria-hidden="true" tabindex="-1"></a><span class="st">'25-30%'</span>, <span class="st">'15%'</span>, <span class="st">'40%'</span>, <span class="st">'20-30%'</span>, <span class="st">'10-15%'</span>, <span class="st">'16%'</span>, <span class="st">'10-40%'</span>]</span>
<span id="cb143-7"><a href="#cb143-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-8"><a href="#cb143-8" aria-hidden="true" tabindex="-1"></a>mapping_kis <span class="op">=</span> {k: <span class="st">"low"</span> <span class="cf">for</span> k <span class="kw">in</span> low}</span>
<span id="cb143-9"><a href="#cb143-9" aria-hidden="true" tabindex="-1"></a>mapping_kis.update({k: <span class="st">"high"</span> <span class="cf">for</span> k <span class="kw">in</span> high})</span>
<span id="cb143-10"><a href="#cb143-10" aria-hidden="true" tabindex="-1"></a>mapping_kis.update({k: <span class="st">"middle"</span> <span class="cf">for</span> k <span class="kw">in</span> middle})</span>
<span id="cb143-11"><a href="#cb143-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-12"><a href="#cb143-12" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Ki67_level_10_50"</span>] <span class="op">=</span> df[<span class="st">"Ki67_specific"</span>].<span class="bu">map</span>(mapping_kis)</span>
<span id="cb143-13"><a href="#cb143-13" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Ki67_level_10_50"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="82">
<pre><code>array(['middle', 'high', nan, 'low'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-123" class="cell" data-execution_count="83">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Ki67_level_25_40"</span>] <span class="op">=</span> np.nan</span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>low <span class="op">=</span> [<span class="st">"1-2%"</span>, <span class="st">"2-3%"</span>,  <span class="st">"2%"</span>, <span class="st">"&lt;1%"</span>, <span class="st">"&gt;1%"</span>]</span>
<span id="cb145-4"><a href="#cb145-4" aria-hidden="true" tabindex="-1"></a>high <span class="op">=</span> [<span class="st">"50%"</span>, <span class="st">"90%"</span>, <span class="st">"&gt;50%"</span>, <span class="st">"80%"</span>, <span class="st">"70%"</span>, <span class="st">"&gt;90%"</span>, <span class="st">"90-95%"</span>, <span class="st">'50-60%'</span>, <span class="st">'40%'</span>]</span>
<span id="cb145-5"><a href="#cb145-5" aria-hidden="true" tabindex="-1"></a>middle <span class="op">=</span> [<span class="st">"4-5%"</span>,<span class="st">'25%'</span>, <span class="st">'15-20%'</span>, <span class="st">'&gt;30%'</span>,  <span class="st">'20-25%'</span>, <span class="st">'20%'</span>, <span class="st">'30-40%'</span>, <span class="st">'30%'</span>, </span>
<span id="cb145-6"><a href="#cb145-6" aria-hidden="true" tabindex="-1"></a><span class="st">'25-30%'</span>, <span class="st">'15%'</span>, <span class="st">'20-30%'</span>, <span class="st">"5%"</span>, <span class="st">'10-15%'</span>, <span class="st">'16%'</span>, <span class="st">'10-40%'</span>, <span class="st">'10%'</span>, <span class="st">'8-10%'</span>, <span class="st">'5-7%'</span>, <span class="st">'5-10%'</span>, <span class="st">'8%'</span>]</span>
<span id="cb145-7"><a href="#cb145-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-8"><a href="#cb145-8" aria-hidden="true" tabindex="-1"></a>mapping_kis <span class="op">=</span> {k: <span class="st">"low"</span> <span class="cf">for</span> k <span class="kw">in</span> low}</span>
<span id="cb145-9"><a href="#cb145-9" aria-hidden="true" tabindex="-1"></a>mapping_kis.update({k: <span class="st">"high"</span> <span class="cf">for</span> k <span class="kw">in</span> high})</span>
<span id="cb145-10"><a href="#cb145-10" aria-hidden="true" tabindex="-1"></a>mapping_kis.update({k: <span class="st">"middle"</span> <span class="cf">for</span> k <span class="kw">in</span> middle})</span>
<span id="cb145-11"><a href="#cb145-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-12"><a href="#cb145-12" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Ki67_level_25_40"</span>] <span class="op">=</span> df[<span class="st">"Ki67_specific"</span>].<span class="bu">map</span>(mapping_kis)</span>
<span id="cb145-13"><a href="#cb145-13" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Ki67_level_25_40"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="83">
<pre><code>array(['middle', 'high', nan, 'low'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-124" class="cell" data-execution_count="84">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Ki67_level_5_80"</span>] <span class="op">=</span> np.nan</span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>low <span class="op">=</span> [<span class="st">"1-2%"</span>, <span class="st">"2-3%"</span>,  <span class="st">"2%"</span>, <span class="st">"&lt;1%"</span>, <span class="st">"&gt;1%"</span>, <span class="st">"4-5%"</span>, <span class="st">"5%"</span>]</span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a>high <span class="op">=</span> [<span class="st">"90%"</span>, <span class="st">"80%"</span>, <span class="st">"&gt;90%"</span>, <span class="st">"90-95%"</span>]</span>
<span id="cb147-5"><a href="#cb147-5" aria-hidden="true" tabindex="-1"></a>middle <span class="op">=</span> [<span class="st">'25%'</span>, <span class="st">'15-20%'</span>, <span class="st">'&gt;30%'</span>,  <span class="st">'20-25%'</span>, <span class="st">'20%'</span>, <span class="st">'30-40%'</span>, <span class="st">'30%'</span>, </span>
<span id="cb147-6"><a href="#cb147-6" aria-hidden="true" tabindex="-1"></a><span class="st">'25-30%'</span>, <span class="st">'15%'</span>, <span class="st">'20-30%'</span>,  <span class="st">'10-15%'</span>, <span class="st">'16%'</span>, <span class="st">'10-40%'</span>, <span class="st">'10%'</span>, <span class="st">'8-10%'</span>, </span>
<span id="cb147-7"><a href="#cb147-7" aria-hidden="true" tabindex="-1"></a><span class="st">'5-7%'</span>, <span class="st">'5-10%'</span>, <span class="st">'8%'</span>, <span class="st">"50%"</span>, <span class="st">"&gt;50%"</span>, <span class="st">"70%"</span>, <span class="st">'50-60%'</span>, <span class="st">'40%'</span>]</span>
<span id="cb147-8"><a href="#cb147-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-9"><a href="#cb147-9" aria-hidden="true" tabindex="-1"></a>mapping_kis <span class="op">=</span> {k: <span class="st">"low"</span> <span class="cf">for</span> k <span class="kw">in</span> low}</span>
<span id="cb147-10"><a href="#cb147-10" aria-hidden="true" tabindex="-1"></a>mapping_kis.update({k: <span class="st">"high"</span> <span class="cf">for</span> k <span class="kw">in</span> high})</span>
<span id="cb147-11"><a href="#cb147-11" aria-hidden="true" tabindex="-1"></a>mapping_kis.update({k: <span class="st">"middle"</span> <span class="cf">for</span> k <span class="kw">in</span> middle})</span>
<span id="cb147-12"><a href="#cb147-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-13"><a href="#cb147-13" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Ki67_level_5_80"</span>] <span class="op">=</span> df[<span class="st">"Ki67_specific"</span>].<span class="bu">map</span>(mapping_kis)</span>
<span id="cb147-14"><a href="#cb147-14" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Ki67_level_5_80"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="84">
<pre><code>array(['middle', nan, 'low', 'high'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-125" class="cell" data-execution_count="85">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Ki67_level_5"</span>] <span class="op">=</span> np.nan</span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>low5 <span class="op">=</span> [<span class="st">"1-2%"</span>, <span class="st">"2-3%"</span>,  <span class="st">"2%"</span>, <span class="st">"&lt;1%"</span>, <span class="st">"&gt;1%"</span>, <span class="st">"4-5%"</span>]</span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a>above5 <span class="op">=</span> [<span class="st">"5%"</span>, <span class="st">'25%'</span>, <span class="st">'15-20%'</span>, <span class="st">'&gt;30%'</span>,  <span class="st">'20-25%'</span>, <span class="st">'20%'</span>, <span class="st">'30-40%'</span>, <span class="st">'30%'</span>, </span>
<span id="cb149-5"><a href="#cb149-5" aria-hidden="true" tabindex="-1"></a><span class="st">'25-30%'</span>, <span class="st">'15%'</span>, <span class="st">'20-30%'</span>,  <span class="st">'10-15%'</span>, <span class="st">'16%'</span>, <span class="st">'10-40%'</span>, <span class="st">'10%'</span>, <span class="st">'8-10%'</span>, </span>
<span id="cb149-6"><a href="#cb149-6" aria-hidden="true" tabindex="-1"></a><span class="st">'5-7%'</span>, <span class="st">'5-10%'</span>, <span class="st">'8%'</span>, <span class="st">"50%"</span>, <span class="st">"&gt;50%"</span>, <span class="st">"70%"</span>, <span class="st">'50-60%'</span>, <span class="st">'40%'</span>, <span class="st">"90%"</span>, <span class="st">"80%"</span>, <span class="st">"&gt;90%"</span>, <span class="st">"90-95%"</span>]</span>
<span id="cb149-7"><a href="#cb149-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-8"><a href="#cb149-8" aria-hidden="true" tabindex="-1"></a>mapping_kis <span class="op">=</span> {k: <span class="st">"&lt;5%"</span> <span class="cf">for</span> k <span class="kw">in</span> low5}</span>
<span id="cb149-9"><a href="#cb149-9" aria-hidden="true" tabindex="-1"></a>mapping_kis.update({k: <span class="st">"≥5%"</span> <span class="cf">for</span> k <span class="kw">in</span> above5})</span>
<span id="cb149-10"><a href="#cb149-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-11"><a href="#cb149-11" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Ki67_level_5"</span>] <span class="op">=</span> df[<span class="st">"Ki67_specific"</span>].<span class="bu">map</span>(mapping_kis)</span>
<span id="cb149-12"><a href="#cb149-12" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Ki67_level_5"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="85">
<pre><code>array(['≥5%', nan, '&lt;5%'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="atrx" class="level3">
<h3 class="anchored" data-anchor-id="atrx">ATRX</h3>
<div id="cell-127" class="cell" data-execution_count="86">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"ATRX"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="86">
<pre><code>array(['ND', 'RE', 'RE ', 'L', nan, 'IC'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-128" class="cell" data-execution_count="87">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>re <span class="op">=</span> [<span class="st">"RE"</span>, <span class="st">"RE "</span>]</span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>loss <span class="op">=</span> [<span class="st">"L"</span>]</span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>incon <span class="op">=</span> [<span class="st">"IC"</span>]</span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>unknown <span class="op">=</span> [<span class="st">"ND"</span>]</span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a>mapping_atrx <span class="op">=</span> {k: <span class="st">"retained"</span> <span class="cf">for</span> k <span class="kw">in</span> re}</span>
<span id="cb153-7"><a href="#cb153-7" aria-hidden="true" tabindex="-1"></a>mapping_atrx.update({k: <span class="st">"loss"</span> <span class="cf">for</span> k <span class="kw">in</span> loss})</span>
<span id="cb153-8"><a href="#cb153-8" aria-hidden="true" tabindex="-1"></a>mapping_atrx.update({k: <span class="st">"inconclusive"</span> <span class="cf">for</span> k <span class="kw">in</span> incon})</span>
<span id="cb153-9"><a href="#cb153-9" aria-hidden="true" tabindex="-1"></a>mapping_atrx.update({k: <span class="st">"unknown"</span> <span class="cf">for</span> k <span class="kw">in</span> unknown})</span>
<span id="cb153-10"><a href="#cb153-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-11"><a href="#cb153-11" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"ATRX"</span>] <span class="op">=</span> df[<span class="st">"ATRX"</span>].replace(mapping_atrx)</span>
<span id="cb153-12"><a href="#cb153-12" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"ATRX"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="87">
<pre><code>array(['unknown', 'retained', 'loss', nan, 'inconclusive'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="other-mutations" class="level3">
<h3 class="anchored" data-anchor-id="other-mutations">Other Mutations</h3>
<div id="cell-130" class="cell" data-execution_count="88">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"other_mutations"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="88">
<pre><code>array([nan, 'TP53, PTEN', 'PTEN',
       'NF1, MDM2 amplification, CDK4 amplification',
       'CDKN2A/B deletion, MTAP deletion, PDGFRA',
       'BRCA2, ATRX, PT53, PDGFRA, PTEN, SETD2, MLH1, MSH2, MSH6, POLE',
       'TP53, PIK3CA, RB1', 'RB1, PRKDC, PDGFRA', 'SPRED1, TRAF7',
       'PTEN, PIK3R1', 'TP53, RB1, and SETD2', 'FGFR1', 'PIK3CA',
       'DKN2A/B deleted, MTAP deleted, PTEN, EGFR, EGFRvIII',
       'PDGFRA amplification, CDKN2A/B homozygous deletion, CREBBP pathogenic variant',
       'EGFR', 'NF1, PTEN, FANCD2, TP53', 'EGFR, PIK3CA',
       'ATRX, PPMD1, PDGFRA amplified, KDR (VEGFR2), KIT', 'PTEN, EGFR',
       'PTEN, NF1', 'PTEN loss, TP53', 'CDKN2A deep deletion',
       'NF1, PTEN', 'H3K27M', 'TP53, EGFRvIII, PTEN deletion, EGFR',
       'NF1, PTPN11', 'H3K27me3', 'PTEN loss', 'TP53 mt, CDK4 amp',
       'CDK4 amp, PTEN, MDM2_FRS2 amplification', 'PTPN11', 'NF1, PIK3R1',
       'PIK3CA, DNMT3A', 'PDGFRA, EGFRvIII, PTEN, TERT',
       'EGFR, PTEN, NF1, PTPN11', 'DNMT3A, MSH6, PPP2R1A, PTEN',
       'TP53, PTEN, F1, FGFR3-TACC3', 'MTAP, PTEN', 'PTEN, TERT, RB1',
       'PTEN, EGFRvIII, EGFR, CDK4, MDM2', 'TP53, DNMT3A',
       'BRCA1, NF1, PTEN (PIK3R1)', 'NF, PDGFRA, KDR, KIT',
       'PDGFRalpha amplified, CDKN2A homozygous loss',
       'EGFR, NOTCH1, CDKN2A/B and MTAP deletion', 'NF1, FGFR2, ARID2',
       'NF1, RET, ROS1', 'ATM, TP53',
       'EGFRvIII, CDKN2A/B and MTAP deletion', 'FGFR3, PTEN',
       'PTEN, CDC73, NTRK2 fusion', 'PIK3CA, PTPN11', 'PIK3CA, NF1',
       'PTEN, PIK3CA, MTOR', 'NF1, TERT', 'EGFR, PTEN ',
       'EGFR, PTEN, BCOR, MTOR, PIK3CA',
       'EGFR, TERT, MTAP deletion, EGFRvIII, CDKN2A deletion, CDKN2B deletion',
       'EGFR, TP53', 'CDKN2A/B, EGFR, PIK3CA, SETD2',
       'ATRX mutation, CDKN2A/B deletion, and PDGFRA amplification',
       'AKT3, EGFRvIII, MTAP deletion, CDKN2A/B deletion',
       'NF1, SETD2, MTAP deletion, CDKN2A/B deletion',
       'TP53, PTEN, TERT, CDKN2C deletion',
       'PTEN deletion, CDKN2A/B deletion, MTAP deletion',
       'EGFRvIII, CDKN2B deletion, CREBBP, EGFR, TERT, MTAP deletion',
       'TP53, deletions of CDKN2A, CDKN2B, BRCA1, and MTAP, fusion of PVT1',
       'TP53, CDKN2A/B deletion, MTAP deletion, IDH1/2 mutation',
       'EGFRvIII, EGFR', 'PIK3CA, ACVR1', 'EGFR ',
       'NF1, TP53, NOTCH1, PDGFRA, PPM1D, SETD2', 'CDKN2A/B, TP53, PTEN',
       'CDKN2A/B deletion, MTAP deletion, NTRK2 fusion, ATM',
       'PTEN, EGFRvIII'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-131" class="cell" data-execution_count="89">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="co">## going to leave this one for now until i can go back through</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a><span class="co"># def clean_mutation_entry(entry):</span></span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a><span class="co">#     if pd.isna(entry):</span></span>
<span id="cb157-5"><a href="#cb157-5" aria-hidden="true" tabindex="-1"></a><span class="co">#         return []</span></span>
<span id="cb157-6"><a href="#cb157-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-7"><a href="#cb157-7" aria-hidden="true" tabindex="-1"></a><span class="co">#     entry = entry.lower().replace('\t', ' ').strip()</span></span>
<span id="cb157-8"><a href="#cb157-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-9"><a href="#cb157-9" aria-hidden="true" tabindex="-1"></a><span class="co">#     typo_map = {</span></span>
<span id="cb157-10"><a href="#cb157-10" aria-hidden="true" tabindex="-1"></a><span class="co">#         'pt53': 'tp53',</span></span>
<span id="cb157-11"><a href="#cb157-11" aria-hidden="true" tabindex="-1"></a><span class="co">#         'egfr ': 'egfr',</span></span>
<span id="cb157-12"><a href="#cb157-12" aria-hidden="true" tabindex="-1"></a><span class="co">#         'nf': 'nf1',</span></span>
<span id="cb157-13"><a href="#cb157-13" aria-hidden="true" tabindex="-1"></a><span class="co">#         'dkna2/b': 'cdkn2a/b',</span></span>
<span id="cb157-14"><a href="#cb157-14" aria-hidden="true" tabindex="-1"></a><span class="co">#         'ppmd1': 'ppm1d',</span></span>
<span id="cb157-15"><a href="#cb157-15" aria-hidden="true" tabindex="-1"></a><span class="co">#         'mdm2_frs2': 'mdm2, frs2',</span></span>
<span id="cb157-16"><a href="#cb157-16" aria-hidden="true" tabindex="-1"></a><span class="co">#         'f1': '',  </span></span>
<span id="cb157-17"><a href="#cb157-17" aria-hidden="true" tabindex="-1"></a><span class="co">#         'cdkn2a homozygous loss': 'cdkn2a/b deletion',</span></span>
<span id="cb157-18"><a href="#cb157-18" aria-hidden="true" tabindex="-1"></a><span class="co">#         'cdkn2a deep deletion': 'cdkn2a/b deletion',</span></span>
<span id="cb157-19"><a href="#cb157-19" aria-hidden="true" tabindex="-1"></a><span class="co">#         'cdkn2a/b homozygous deletion': 'cdkn2a/b deletion',</span></span>
<span id="cb157-20"><a href="#cb157-20" aria-hidden="true" tabindex="-1"></a><span class="co">#         'mtap deleted': 'mtap deletion',</span></span>
<span id="cb157-21"><a href="#cb157-21" aria-hidden="true" tabindex="-1"></a><span class="co">#         'pten loss': 'pten deletion',</span></span>
<span id="cb157-22"><a href="#cb157-22" aria-hidden="true" tabindex="-1"></a><span class="co">#         'tp53 mt': 'tp53 mutation',</span></span>
<span id="cb157-23"><a href="#cb157-23" aria-hidden="true" tabindex="-1"></a><span class="co">#         'cdk4 amp': 'cdk4 amplification',</span></span>
<span id="cb157-24"><a href="#cb157-24" aria-hidden="true" tabindex="-1"></a><span class="co">#         'mdm2 amplified': 'mdm2 amplification',</span></span>
<span id="cb157-25"><a href="#cb157-25" aria-hidden="true" tabindex="-1"></a><span class="co">#         'pdgfralpha amplified': 'pdgfra amplification',</span></span>
<span id="cb157-26"><a href="#cb157-26" aria-hidden="true" tabindex="-1"></a><span class="co">#     }</span></span>
<span id="cb157-27"><a href="#cb157-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-28"><a href="#cb157-28" aria-hidden="true" tabindex="-1"></a><span class="co">#     for wrong, correct in typo_map.items():</span></span>
<span id="cb157-29"><a href="#cb157-29" aria-hidden="true" tabindex="-1"></a><span class="co">#         entry = entry.replace(wrong, correct)</span></span>
<span id="cb157-30"><a href="#cb157-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-31"><a href="#cb157-31" aria-hidden="true" tabindex="-1"></a><span class="co">#     entry = re.sub(r'\band\b|\s+and\s+', ',', entry)</span></span>
<span id="cb157-32"><a href="#cb157-32" aria-hidden="true" tabindex="-1"></a><span class="co">#     entry = entry.replace('(', '').replace(')', '')  </span></span>
<span id="cb157-33"><a href="#cb157-33" aria-hidden="true" tabindex="-1"></a><span class="co">#     parts = [p.strip() for p in re.split(r',|\band\b', entry) if p.strip()]</span></span>
<span id="cb157-34"><a href="#cb157-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-35"><a href="#cb157-35" aria-hidden="true" tabindex="-1"></a><span class="co">#     return list(dict.fromkeys(parts))  </span></span>
<span id="cb157-36"><a href="#cb157-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-37"><a href="#cb157-37" aria-hidden="true" tabindex="-1"></a><span class="co"># df['mutations_clean'] = df['mutations_raw'].apply(clean_mutation_entry)</span></span>
<span id="cb157-38"><a href="#cb157-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-39"><a href="#cb157-39" aria-hidden="true" tabindex="-1"></a><span class="co"># from itertools import chain</span></span>
<span id="cb157-40"><a href="#cb157-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-41"><a href="#cb157-41" aria-hidden="true" tabindex="-1"></a><span class="co"># all_mutations = sorted(set(chain.from_iterable(df['mutations_clean'])))</span></span>
<span id="cb157-42"><a href="#cb157-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-43"><a href="#cb157-43" aria-hidden="true" tabindex="-1"></a><span class="co"># for gene in all_mutations:</span></span>
<span id="cb157-44"><a href="#cb157-44" aria-hidden="true" tabindex="-1"></a><span class="co">#     colname = gene.replace(' ', '_').replace('-', '_').replace('/', '_').lower()</span></span>
<span id="cb157-45"><a href="#cb157-45" aria-hidden="true" tabindex="-1"></a><span class="co">#     df[colname] = df['mutations_clean'].apply(lambda x: 'yes' if gene in x else 'no')</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="mitotic-activity-increase" class="level3">
<h3 class="anchored" data-anchor-id="mitotic-activity-increase">Mitotic Activity Increase</h3>
<div id="cell-133" class="cell" data-execution_count="90">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"mitotic_activity_increase"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="90">
<pre><code>array(['scattered', 'easily identified', 'frequent', '1to5', nan, '0',
       '6to10', '&gt;10', 'occasional', 'rare', 'numerous', 'brisk', 'few',
       'occasional ', 'present', 'increased', 'many', 'identified',
       'infrequent', 'difficult to find', 'atypical ',
       'difficult to identify', 'easily identified ', 'some',
       'many occasional', 'brisk ', 'many rare', '&gt;10 ', 'inconspicuous',
       'several'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-134" class="cell" data-execution_count="91">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"mitotic_activity_increase"</span>] <span class="op">=</span> df[<span class="st">"mitotic_activity_increase"</span>].replace({<span class="st">'&gt;10 '</span>: <span class="st">'&gt;10'</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="specific-mitotic-activity" class="level3">
<h3 class="anchored" data-anchor-id="specific-mitotic-activity">Specific Mitotic Activity</h3>
<div id="cell-136" class="cell" data-execution_count="92">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"specific_mitotic"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="92">
<pre><code>array([nan, '2to3', '0', '3', '10', '20', '7', '8', '11', '6', '4to5',
       '13', '21', '14', '1', '4', '9', '12', '5', 'at least 10', '5to6',
       '7to8', '15', '3to4', '2', '16', '19', '8to9'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-137" class="cell" data-execution_count="93">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"specific_mitotic"</span>] <span class="op">=</span> df[<span class="st">"specific_mitotic"</span>].replace({<span class="st">"5-Jan"</span> : <span class="st">"5"</span>})</span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"specific_mitotic"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="93">
<pre><code>array([nan, '2to3', '0', '3', '10', '20', '7', '8', '11', '6', '4to5',
       '13', '21', '14', '1', '4', '9', '12', '5', 'at least 10', '5to6',
       '7to8', '15', '3to4', '2', '16', '19', '8to9'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="caris" class="level3">
<h3 class="anchored" data-anchor-id="caris">Caris</h3>
<div id="cell-139" class="cell" data-execution_count="94">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"caris"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="94">
<pre><code>array(['No', 'Yes ', 'No ', 'Yes', 'Yes- JH', 'yes', 'yes- Duke', nan,
       'yes- NGS', 'no'], dtype=object)</code></pre>
</div>
</div>
<div id="cell-140" class="cell" data-execution_count="95">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>yes <span class="op">=</span> [<span class="st">'Yes'</span>, <span class="st">'yes'</span>, <span class="st">'Yes '</span>, <span class="st">'Yes- NIH'</span>, <span class="st">'Yes- JH'</span>, <span class="st">'yes- Duke'</span>, <span class="st">'yes- NGS'</span>]</span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>no <span class="op">=</span> [<span class="st">'No'</span>, <span class="st">'no'</span>, <span class="st">'No '</span>]</span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-4"><a href="#cb167-4" aria-hidden="true" tabindex="-1"></a>mapping_caris <span class="op">=</span> {k: <span class="st">"yes"</span> <span class="cf">for</span> k <span class="kw">in</span> yes}</span>
<span id="cb167-5"><a href="#cb167-5" aria-hidden="true" tabindex="-1"></a>mapping_caris.update({k: <span class="st">"no"</span> <span class="cf">for</span> k <span class="kw">in</span> no})</span>
<span id="cb167-6"><a href="#cb167-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-7"><a href="#cb167-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"caris"</span>] <span class="op">=</span> df[<span class="st">"caris"</span>].replace(mapping_caris)</span>
<span id="cb167-8"><a href="#cb167-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"caris"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="95">
<pre><code>array(['no', 'yes', nan], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="dna-profiling" class="level3">
<h3 class="anchored" data-anchor-id="dna-profiling">DNA Profiling?</h3>
<div id="cell-142" class="cell" data-execution_count="96">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"dna_profile"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="96">
<pre><code>array(['No', 'yes', 'Yes', 'no', nan], dtype=object)</code></pre>
</div>
</div>
<div id="cell-143" class="cell" data-execution_count="97">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>yes <span class="op">=</span> [<span class="st">'Yes'</span>, <span class="st">'yes'</span>]</span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>no <span class="op">=</span> [<span class="st">'No'</span>, <span class="st">'no'</span>]</span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a>mapping_dna <span class="op">=</span> {k: <span class="st">"yes"</span> <span class="cf">for</span> k <span class="kw">in</span> yes}</span>
<span id="cb171-5"><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a>mapping_dna.update({k: <span class="st">"no"</span> <span class="cf">for</span> k <span class="kw">in</span> no})</span>
<span id="cb171-6"><a href="#cb171-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-7"><a href="#cb171-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"dna_profile"</span>] <span class="op">=</span> df[<span class="st">"dna_profile"</span>].replace(mapping_dna)</span>
<span id="cb171-8"><a href="#cb171-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"dna_profile"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="97">
<pre><code>array(['no', 'yes', nan], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="methylation-result" class="level3">
<h3 class="anchored" data-anchor-id="methylation-result">Methylation Result</h3>
<div id="cell-145" class="cell" data-execution_count="98">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"methylation_result"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="98">
<pre><code>array([nan, 'corroborates diagnosis', 'subtype E',
       'corroborates diagnosis; mesenchymal subtype',
       'corroborates GBM diagnosis ', 'n/A', 'mesenchymal type',
       'high grade neuroepithelial subtype E', 'RTK II- DNA methylation',
       'RTK I', 'mesenchymal subtype; NTRK fusion', 'Not uploaded'],
      dtype=object)</code></pre>
</div>
</div>
<div id="cell-146" class="cell" data-execution_count="99">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"methylation_result"</span>] <span class="op">=</span> df[<span class="st">"methylation_result"</span>].replace({<span class="st">'n/A'</span> : np.nan})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-147" class="cell" data-execution_count="100">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"methylation_result"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="100">
<pre><code>array([nan, 'corroborates diagnosis', 'subtype E',
       'corroborates diagnosis; mesenchymal subtype',
       'corroborates GBM diagnosis ', 'mesenchymal type',
       'high grade neuroepithelial subtype E', 'RTK II- DNA methylation',
       'RTK I', 'mesenchymal subtype; NTRK fusion', 'Not uploaded'],
      dtype=object)</code></pre>
</div>
</div>
</section>
<section id="creating-status-variable" class="level3">
<h3 class="anchored" data-anchor-id="creating-status-variable">Creating Status Variable</h3>
<div id="cell-149" class="cell" data-execution_count="101">
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"vital_status"</span>].unique()</span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"status"</span>] <span class="op">=</span> df[<span class="st">"vital_status"</span>].<span class="bu">map</span>({</span>
<span id="cb178-4"><a href="#cb178-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"lost to follow up"</span>: <span class="dv">0</span>,</span>
<span id="cb178-5"><a href="#cb178-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"alive"</span>: <span class="dv">0</span>,</span>
<span id="cb178-6"><a href="#cb178-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"dead"</span>: <span class="dv">1</span></span>
<span id="cb178-7"><a href="#cb178-7" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb178-8"><a href="#cb178-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-9"><a href="#cb178-9" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"status"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="101">
<pre><code>array([ 0.,  1., nan])</code></pre>
</div>
</div>
</section>
</section>
<section id="exporting" class="level2">
<h2 class="anchored" data-anchor-id="exporting">Exporting</h2>
<div id="cell-151" class="cell" data-execution_count="102">
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>df.to_csv(<span class="st">"../../data/cleaned_data/cleaned_data.csv"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>